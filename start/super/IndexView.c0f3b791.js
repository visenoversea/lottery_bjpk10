import{b as j,M as G,r as S,c as i,d as O,o as r,k as L,h as l,g as e,m as c,w as F,G as V,i as B,O as P,n as x,E as $,x as A,f as y,e as v,F as H,D as J,j as N}from"./index.2fd98969.js";import{_ as Q}from"./UploadButton.30b75d49.js";import{f as T}from"./index.969b688d.js";const W={__name:"EditView",props:{modelValue:{type:Boolean,default:!1},data:{type:Object}},emits:["update:modelValue","success"],setup(D,{emit:h}){const s=D,k=j(!1),o=G({get:()=>s.modelValue,set:g=>{h("update:modelValue",g)}}),n=S({id:0,type:0,content:"",status:1}),E=()=>{n.id=s.data.id,n.type=s.data.type,n.content=s.data.content,n.status=s.data.status},U=async()=>{if(k.value)return;k.value=!0;const{success:g,data:d}=await x.editLangConfigList(n);k.value=!1,g&&(h("success"),$.success(d.msg),o.value=!1)};return(g,d)=>{const b=i("el-form-item"),u=i("el-radio"),a=i("el-radio-group"),f=i("el-input"),_=i("el-option"),z=i("el-select"),w=i("el-form"),C=i("el-button"),K=i("el-dialog"),p=O("loading");return r(),L(K,{modelValue:B(o),"onUpdate:modelValue":d[4]||(d[4]=m=>P(o)?o.value=m:null),top:"2vh",title:"\u7F16\u8F91",onOpen:E,draggable:"","close-on-click-modal":!1,width:"680px"},{footer:l(()=>[e(C,{size:"default",onClick:d[3]||(d[3]=m=>o.value=!1)},{default:l(()=>[c("\u53D6 \u6D88")]),_:1}),e(C,{size:"default",type:"primary",onClick:U},{default:l(()=>[c("\u786E \u8BA4")]),_:1})]),default:l(()=>[F((r(),L(w,{size:"default",model:n,"label-width":"90px"},{default:l(()=>[e(b,{label:"id"},{default:l(()=>[c(V(s.data.id),1)]),_:1}),e(b,{label:"\u8BED\u8A00"},{default:l(()=>[c(V(s.data.lang),1)]),_:1}),e(b,{label:"\u952E\u503C"},{default:l(()=>[c(V(s.data.k),1)]),_:1}),e(b,{label:"\u5185\u5BB9\u7C7B\u578B"},{default:l(()=>[e(a,{modelValue:n.type,"onUpdate:modelValue":d[0]||(d[0]=m=>n.type=m)},{default:l(()=>[e(u,{class:"g-green",label:0},{default:l(()=>[c("String")]),_:1}),e(u,{class:"g-red",label:1},{default:l(()=>[c("Number")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"\u5185\u5BB9"},{default:l(()=>[e(f,{type:"textarea",modelValue:n.content,"onUpdate:modelValue":d[1]||(d[1]=m=>n.content=m),placeholder:"\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),e(b,{label:"\u72B6\u6001"},{default:l(()=>[e(z,{modelValue:n.status,"onUpdate:modelValue":d[2]||(d[2]=m=>n.status=m)},{default:l(()=>[e(_,{label:"\u5F85\u7FFB\u8BD1",value:0}),e(_,{label:"\u5DF2\u7FFB\u8BD1",value:1}),e(_,{label:"\u4E0D\u7FFB\u8BD1",value:2})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[p,k.value]])]),_:1},8,["modelValue"])}}},X={class:"g-flex"},Y=y("span",null,"\u8BED\u8A00\u7FFB\u8BD1\u5217\u8868",-1),Z={class:"g-flex-justify-end g-flex-1"},ee={key:0,class:"g-red"},te={key:1,class:"g-green"},le=["onClick"],ae={key:0,class:"g-red"},oe={key:1,class:"g-green"},ne={key:2,class:"g-purple"},se={key:3,class:"g-red"},re={__name:"IndexView",setup(D){const h=A(),s=S({loading:!1,total:0,list:[],langList:[]});(async()=>{s.loading=!0;const{success:u,data:a}=await x.getLangList();s.loading=!1,u&&(s.langList=a.list)})();const o=S({lang_config_id:h.params.id,lang:"",status:"",k:"",content:"",page:1,limit:15}),n=async(u=!0)=>{u&&(o.page=1),s.loading=!0;const{success:a,data:f}=await x.getLangConfigList(o);s.loading=!1,a&&(s.list=f.list,s.total=f.total)},E=async()=>{if(o.lang==""){$.error("\u8BF7\u9009\u62E9\u8981\u5BFC\u51FA\u7684\u8BED\u8A00");return}const{success:u,data:a}=await x.exportTranslate({lang_config_id:o.lang_config_id,lang:o.lang});!u||($.success(a.msg),window.open(a.filePath))},U=async()=>{const{success:u,data:a}=await x.translateLangConfigList(o);!u||($.success(a.msg),a.code==2&&setTimeout(()=>{U()},1e4),await n())},g=j(!1),d=u=>{s.row=u,g.value=!0},b=u=>{o.k=u,n()};return n(),(u,a)=>{const f=i("el-button"),_=i("el-option"),z=i("el-select"),w=i("el-form-item"),C=i("el-input"),K=i("el-form"),p=i("el-table-column"),m=i("el-table"),I=i("el-pagination"),M=i("el-card"),R=O("loading");return r(),L(M,null,{header:l(()=>[y("div",X,[Y,y("div",Z,[e(Q,{label:"\u5BFC\u5165Excel","api-url":"importTranslate",data:{langConfigId:o.lang_config_id}},null,8,["data"]),e(f,{type:"primary",onClick:E},{default:l(()=>[c("\u5BFC\u51FAExcel")]),_:1}),e(f,{type:"success",onClick:a[0]||(a[0]=t=>U())},{default:l(()=>[c("\u5F00\u59CB\u7FFB\u8BD1")]),_:1})])])]),default:l(()=>[e(K,{inline:!0},{default:l(()=>[e(w,{label:"\u72B6\u6001"},{default:l(()=>[e(z,{modelValue:o.status,"onUpdate:modelValue":a[1]||(a[1]=t=>o.status=t),onChange:n},{default:l(()=>[e(_,{label:"\u5168\u90E8",value:""}),e(_,{label:"\u5DF2\u7FFB\u8BD1",value:"1"}),e(_,{label:"\u4E0D\u7FFB\u8BD1",value:"2"}),e(_,{label:"\u5F85\u7FFB\u8BD1",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"\u8BED\u8A00"},{default:l(()=>[e(z,{modelValue:o.lang,"onUpdate:modelValue":a[2]||(a[2]=t=>o.lang=t),onChange:n},{default:l(()=>[e(_,{label:"\u5168\u90E8",value:""}),(r(!0),v(H,null,J(s.langList,t=>(r(),L(_,{key:t.id,label:t.name,value:t.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"\u952E\u503C"},{default:l(()=>[e(C,{modelValue:o.k,"onUpdate:modelValue":a[3]||(a[3]=t=>o.k=t),onKeyup:N(n,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u952E\u503C",onClear:n,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),e(w,{label:"\u5185\u5BB9"},{default:l(()=>[e(C,{modelValue:o.content,"onUpdate:modelValue":a[4]||(a[4]=t=>o.content=t),onKeyup:N(n,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",onClear:n,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),e(w,null,{default:l(()=>[e(f,{type:"primary",onClick:n},{default:l(()=>[c("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1}),F((r(),L(m,{data:s.list,stripe:"",border:""},{default:l(()=>[e(p,{prop:"id",label:"id",width:"100","show-overflow-tooltip":!0}),e(p,{prop:"lang",label:"\u7FFB\u8BD1\u8BED\u8A00",width:"80","show-overflow-tooltip":!0}),e(p,{label:"\u5185\u5BB9\u7C7B\u578B",width:"80","show-overflow-tooltip":!0},{default:l(t=>[t.row.type==1?(r(),v("span",ee,"Number")):(r(),v("span",te,"String"))]),_:1}),e(p,{label:"\u952E\u503C","min-width":"120","show-overflow-tooltip":!0},{default:l(t=>[y("span",{onClick:q=>b(t.row.k),class:"g-purple g-pointer"},V(t.row.k),9,le)]),_:1}),e(p,{prop:"content",label:"\u5185\u5BB9","min-width":"120","show-overflow-tooltip":!0}),e(p,{label:"\u72B6\u6001",width:"80","show-overflow-tooltip":!0},{default:l(t=>[t.row.status==0?(r(),v("span",ae,"\u5F85\u7FFB\u8BD1")):t.row.status==1?(r(),v("span",oe,"\u5DF2\u7FFB\u8BD1")):t.row.status==2?(r(),v("span",ne,"\u4E0D\u7FFB\u8BD1")):(r(),v("span",se,"\u5F02\u5E38"))]),_:1}),e(p,{label:"\u521B\u5EFA\u65F6\u95F4",width:"130"},{default:l(t=>[y("span",null,V(B(T)(t.row.create_time)),1)]),_:1}),e(p,{label:"\u66F4\u65B0\u65F6\u95F4",width:"130"},{default:l(t=>[y("span",null,V(B(T)(t.row.modify_time)),1)]),_:1}),e(p,{label:"\u64CD\u4F5C",width:"140",fixed:"right"},{default:l(t=>[e(f,{type:"primary",onClick:q=>d(t.row)},{default:l(()=>[c("\u7F16\u8F91")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,s.loading]]),e(I,{"page-sizes":[15,30,60,100],total:s.total,"page-size":o.limit,"onUpdate:page-size":a[5]||(a[5]=t=>o.limit=t),"current-page":o.page,"onUpdate:current-page":a[6]||(a[6]=t=>o.page=t),onCurrentChange:a[7]||(a[7]=t=>n(!1)),onSizeChange:a[8]||(a[8]=t=>n(!1)),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"]),e(W,{onSuccess:a[9]||(a[9]=t=>n(!1)),modelValue:g.value,"onUpdate:modelValue":a[10]||(a[10]=t=>g.value=t),data:s.row},null,8,["modelValue","data"])]),_:1})}}};export{re as default};
