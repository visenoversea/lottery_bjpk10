import{_ as me}from"./_plugin-vue_export-helper.90cad5bc.js";import{o as ye,e as be,l as we,v as Ce,S as xe}from"./index.cf99acbd.js";function Ft(i){return i===""?i:i==="true"||i=="1"}function Ae(i,t){return new Promise((e,r)=>{var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var o=new FileReader;o.onloadend=function(){e(o.result)},o.readAsArrayBuffer(n.response)},n.open("GET",i),n.send()})}function lt(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function Vt(i,t){for(var e="",r=0,n=-1,o=0,a,s=0;s<=i.length;++s){if(s<i.length)a=i.charCodeAt(s);else{if(a===47)break;a=47}if(a===47){if(!(n===s-1||o===1))if(n!==s-1&&o===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",r=0):(e=e.slice(0,l),r=e.length-1-e.lastIndexOf("/")),n=s,o=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=s,o=0;continue}}t&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+i.slice(n+1,s):e=i.slice(n+1,s),r=s-n-1;n=s,o=0}else a===46&&o!==-1?++o:o=-1}return e}function Ee(i,t){var e=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+r:e+i+r:r}var bt={resolve:function(){for(var t="",e=!1,r,n=arguments.length-1;n>=-1&&!e;n--){var o;n>=0?o=arguments[n]:(r===void 0&&(r=process.cwd()),o=r),lt(o),o.length!==0&&(t=o+"/"+t,e=o.charCodeAt(0)===47)}return t=Vt(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(lt(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=Vt(t,!e),t.length===0&&!e&&(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return lt(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];lt(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":bt.normalize(t)},relative:function(t,e){if(lt(t),lt(e),t===e||(t=bt.resolve(t),e=bt.resolve(e),t===e))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var n=t.length,o=n-r,a=1;a<e.length&&e.charCodeAt(a)===47;++a);for(var s=e.length,l=s-a,c=o<l?o:l,u=-1,f=0;f<=c;++f){if(f===c){if(l>c){if(e.charCodeAt(a+f)===47)return e.slice(a+f+1);if(f===0)return e.slice(a+f)}else o>c&&(t.charCodeAt(r+f)===47?u=f:f===0&&(u=0));break}var p=t.charCodeAt(r+f),C=e.charCodeAt(a+f);if(p!==C)break;p===47&&(u=f)}var y="";for(f=r+u+1;f<=n;++f)(f===n||t.charCodeAt(f)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+e.slice(a+u):(a+=u,e.charCodeAt(a)===47&&++a,e.slice(a))},_makeLong:function(t){return t},dirname:function(t){if(lt(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,n=-1,o=!0,a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!o){n=a;break}}else o=!1;return n===-1?r?"/":".":r&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');lt(t);var r=0,n=-1,o=!0,a;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var s=e.length-1,l=-1;for(a=t.length-1;a>=0;--a){var c=t.charCodeAt(a);if(c===47){if(!o){r=a+1;break}}else l===-1&&(o=!1,l=a+1),s>=0&&(c===e.charCodeAt(s)?--s===-1&&(n=a):(s=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}else{for(a=t.length-1;a>=0;--a)if(t.charCodeAt(a)===47){if(!o){r=a+1;break}}else n===-1&&(o=!1,n=a+1);return n===-1?"":t.slice(r,n)}},extname:function(t){lt(t);for(var e=-1,r=0,n=-1,o=!0,a=0,s=t.length-1;s>=0;--s){var l=t.charCodeAt(s);if(l===47){if(!o){r=s+1;break}continue}n===-1&&(o=!1,n=s+1),l===46?e===-1?e=s:a!==1&&(a=1):e!==-1&&(a=-1)}return e===-1||n===-1||a===0||a===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return Ee("/",t)},parse:function(t){lt(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r=t.charCodeAt(0),n=r===47,o;n?(e.root="/",o=1):o=0;for(var a=-1,s=0,l=-1,c=!0,u=t.length-1,f=0;u>=o;--u){if(r=t.charCodeAt(u),r===47){if(!c){s=u+1;break}continue}l===-1&&(c=!1,l=u+1),r===46?a===-1?a=u:f!==1&&(f=1):a!==-1&&(f=-1)}return a===-1||l===-1||f===0||f===1&&a===l-1&&a===s+1?l!==-1&&(s===0&&n?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(s,l)):(s===0&&n?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(s,a),e.base=t.slice(s,l)),e.ext=t.slice(a,l)),s>0?e.dir=t.slice(0,s-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};bt.posix=bt;const Te=bt.extname,ie=bt.basename;class Pe{constructor(){let t=(()=>typeof global>"u")(),e="image/png",r="image/jpeg",n="image/jpeg",o="image/webp",a="application/pdf",s="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:e,jpg:r,jpeg:n,webp:o}:{png:e,jpg:r,jpeg:n,pdf:a,svg:s},mimes:t?{[e]:"png",[r]:"jpg",[o]:"webp"}:{[e]:"png",[r]:"jpg",[a]:"pdf",[s]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function Se(i,{filename:t="",extension:e="",format:T,page:n,quality:o,matte:a,density:s,outline:l,archive:C}={}){var{fromMime:u,toMime:f,expected:p}=new Pe,C=C||"canvas",y=T||e.replace(/@\d+x$/i,"")||Te(t),T=u(f(y)||y),B=f(T),g=i.length;if(!y)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!T)throw new Error(`Unsupported file format "${y}" (expected ${p})`);if(!g)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let v,k,d=t.replace(/{(\d*)}/g,(m,A)=>(k=!0,A=parseInt(A,10),v=isFinite(A)?A:isFinite(v)?v:-1,"{}")),b=n>0?n-1:n<0?g+n:void 0;if(isFinite(b)&&b<0||b>=g)throw new RangeError(g==1?`Canvas only has a \u2018page 1\u2019 (${b} is out of bounds)`:`Canvas has pages 1\u2013${g} (${b} is out of bounds)`);if(i=isFinite(b)?[i[b]]:k||T=="pdf"?i:i.slice(-1),o===void 0)o=.92;else if(typeof o!="number"||!isFinite(o)||o<0||o>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(s===void 0){let m=(e||ie(t,y)).match(/@(\d+)x$/i);s=m?parseInt(m[1],10):1}else if(typeof s!="number"||!Number.isInteger(s)||s<1)throw new TypeError("The density option must be a non-negative integer");return l===void 0?l=!0:T=="svg"&&(l=!!l),{filename:t,pattern:d,format:T,mime:B,pages:i,padding:v,quality:o,matte:a,density:s,outline:l,archive:C}}class _t{static for(t){return new _t().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var e=this.crc|0,r=this.table,n=0,o=t.length|0;n<o;n++)e=e>>>8^r[(e^t[n])&255];return this.crc=e,this}}_t.prototype.table=(()=>{var i,t,e,r=[];for(i=0;i<256;i++){for(e=i,t=0;t<8;t++)e=e&1?e>>>1^3988292384:e>>>1;r[i]=e}return r})();function Nt(i){let t=new Uint8Array(i),e=new DataView(t.buffer),r={array:t,view:e,size:i,set8(n,o){return e.setUint8(n,o),r},set16(n,o){return e.setUint16(n,o,!0),r},set32(n,o){return e.setUint32(n,o,!0),r},bytes(n,o){return t.set(o,n),r}};return r}class Lt{constructor(t){let e=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2,date:(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}),this.add(t)}async add(t,e){let r=!e,n=Lt.encoder.encode(`${this.directory}/${r?"":t}`),o=new Uint8Array(r?0:await e.arrayBuffer()),a=30+n.length,s=a+o.length,l=16,{offset:c}=this,u=Nt(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,_t.for(o)).set32(14,o.length).set32(18,o.length).set16(22,n.length);c+=a;let f=Nt(a+o.length+l).set32(0,67324752).bytes(4,u.array).bytes(30,n).bytes(a,o);c+=o.length,f.set32(s,134695760).bytes(s+4,u.array.slice(10,22)),c+=l,this.files.push({offset:c,folder:r,name:n,header:u,payload:f}),this.offset=c}toBuffer(){let t=this.files.reduce((f,{name:p})=>46+p.length+f,0),e=Nt(t+22),r=0;for(var{offset:n,name:o,header:a,folder:s}of this.files)e.set32(r,33639248).set16(r+4,20).bytes(r+6,a.array).set8(r+38,s?16:0).set32(r+42,n).bytes(r+46,o),r+=46+o.length;e.set32(r,101010256).set16(r+8,this.files.length).set16(r+10,this.files.length).set32(r+12,t).set32(r+16,this.offset);let l=new Uint8Array(this.offset+e.size),c=0;for(var{payload:u}of this.files)l.set(u.array,c),c+=u.size;return l.set(e.array,c),l}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Lt.encoder=new TextEncoder;const Ut=(i,t,e,r)=>{if(r){let{width:n,height:o}=i,a=Object.assign(document.createElement("canvas"),{width:n,height:o}),s=a.getContext("2d");s.fillStyle=r,s.fillRect(0,0,n,o),s.drawImage(i,0,0),i=a}return new Promise((n,o)=>i.toBlob(n,t,e))},ke=(...i)=>Ut(...i).then(t=>t.arrayBuffer()),De=async(i,t,e,r,n)=>{ae(n,await Ut(i,t,e,r))},Be=async(i,t,e,r,n,o,a)=>{let s=u=>o.replace("{}",String(u+1).padStart(a,"0")),l=ie(n,".zip")||"archive",c=new Lt(l);await Promise.all(i.map(async(u,f)=>{let p=s(f);await c.add(p,await Ut(u,t,e,r))})),ae(`${l}.zip`,c.blob)},ae=(i,t)=>{const e=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=e,r.setAttribute("download",i),typeof r.download>"u"&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>window.URL.revokeObjectURL(e),100)},_e=(i,t,e)=>i.map(r=>{if(t==1&&!e)return r.canvas;let n=document.createElement("canvas"),o=n.getContext("2d"),a=r.canvas?r.canvas:r;return n.width=a.width*t,n.height=a.height*t,e&&(o.fillStyle=e,o.fillRect(0,0,n.width,n.height)),o.scale(t,t),o.drawImage(a,0,0),n}),Le={asBuffer:ke,asDownload:De,asZipDownload:Be,atScale:_e,options:Se},{asBuffer:Rt,asDownload:Ie,asZipDownload:Me,atScale:jt,options:$t}=Le,Wt=Symbol.for("toDataURL"),Oe=i=>new Promise((t,e)=>Object.assign(new se,{crossOrigin:"Anonymous",onload:t,onerror:e,src:i}));class Fe{constructor(t,e){let r=document.createElement("canvas"),n=[];Object.defineProperty(r,"async",{value:!0,writable:!1,enumerable:!0});for(var[o,a]of Object.entries({png:()=>Rt(r,"image/png"),jpg:()=>Rt(r,"image/jpeg"),pages:()=>n.concat(r).map(s=>s.getContext("2d"))}))Object.defineProperty(r,o,{get:a});return Object.assign(r,{width:t,height:e,newPage(...s){var{width:c,height:u}=r,l=Object.assign(document.createElement("canvas"),{width:c,height:u});l.getContext("2d").drawImage(r,0,0),n.push(l);var[c,u]=s.length?s:[c,u];return Object.assign(r,{width:c,height:u}).getContext("2d")},saveAs(s,l){l=typeof l=="number"?{quality:l}:l;let c=$t(this.pages,{filename:s,...l}),{pattern:u,padding:f,mime:p,quality:C,matte:y,density:T,archive:B}=c,g=jt(c.pages,T);return f==null?Ie(g[0],p,C,y,s):Me(g,p,C,y,B,u,f)},toBuffer(s="png",l={}){l=typeof l=="number"?{quality:l}:l;let c=$t(this.pages,{extension:s,...l}),{mime:u,quality:f,matte:p,pages:C,density:y}=c,T=jt(C,y,p)[0];return Rt(T,u,f,p)},[Wt]:r.toDataURL.bind(r),toDataURL(s="png",l={}){l=typeof l=="number"?{quality:l}:l;let c=$t(this.pages,{extension:s,...l}),{mime:u,quality:f,matte:p,pages:C,density:y}=c,T=jt(C,y,p)[0],B=T[T===r?Wt:"toDataURL"](u,f);return Promise.resolve(B)}})}}const{CanvasRenderingContext2D:Ne,CanvasGradient:Re,CanvasPattern:je,Image:se,ImageData:$e,Path2D:ze,DOMMatrix:Ge,DOMRect:Ue,DOMPoint:He}=window,Ke={Canvas:Fe,loadImage:Oe,CanvasRenderingContext2D:Ne,CanvasGradient:Re,CanvasPattern:je,Image:se,ImageData:$e,Path2D:ze,DOMMatrix:Ge,DOMRect:Ue,DOMPoint:He},Tt=(i,t,e={},r=e)=>{if(Array.isArray(t))t.forEach(n=>Tt(i,n,e,r));else if(typeof t=="function")t(i,e,r,Tt);else{const n=Object.keys(t)[0];Array.isArray(t[n])?(r[n]={},Tt(i,t[n],e,r[n])):r[n]=t[n](i,e,r,Tt)}return e},wt=(i,t)=>(e,r,n,o)=>{t(e,r,n)&&o(e,i,r,n)},Xe=(i,t)=>(e,r,n,o)=>{const a=[];let s=e.pos;for(;t(e,r,n);){const l={};if(o(e,i,r,l),e.pos===s)break;s=e.pos,a.push(l)}return a},Ze=i=>({data:i,pos:0}),at=()=>i=>i.data[i.pos++],le=(i=0)=>t=>t.data[t.pos+i],ut=i=>t=>t.data.subarray(t.pos,t.pos+=i),It=i=>t=>t.data.subarray(t.pos,t.pos+i),zt=i=>t=>Array.from(ut(i)(t)).map(e=>String.fromCharCode(e)).join(""),yt=i=>t=>{const e=ut(2)(t);return i?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]},ce=(i,t)=>(e,r,n)=>{const o=typeof t=="function"?t(e,r,n):t,a=ut(i),s=new Array(o);for(var l=0;l<o;l++)s[l]=a(e);return s},Je=(i,t,e)=>{for(var r=0,n=0;n<e;n++)r+=i[t+n]&&2**(e-n-1);return r},Ht=i=>t=>{const e=at()(t),r=new Array(8);for(var n=0;n<8;n++)r[7-n]=!!(e&1<<n);return Object.keys(i).reduce((o,a)=>{const s=i[a];return s.length?o[a]=Je(r,s.index,s.length):o[a]=r[s.index],o},{})};var Mt={blocks:i=>{const e=[],r=i.data.length;for(var n=0,o=at()(i);o!==0&&o;o=at()(i)){if(i.pos+o>=r){const c=r-i.pos;e.push(ut(c)(i)),n+=c;break}e.push(ut(o)(i)),n+=o}const a=new Uint8Array(n);for(var s=0,l=0;l<e.length;l++)a.set(e[l],s),s+=e[l].length;return a}};const Ve=wt({gce:[{codes:ut(2)},{byteSize:at()},{extras:Ht({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:yt(!0)},{transparentColorIndex:at()},{terminator:at()}]},i=>{var t=It(2)(i);return t[0]===33&&t[1]===249}),We=wt({image:[{code:at()},{descriptor:[{left:yt(!0)},{top:yt(!0)},{width:yt(!0)},{height:yt(!0)},{lct:Ht({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},wt({lct:ce(3,(i,t,e)=>Math.pow(2,e.descriptor.lct.size+1))},(i,t,e)=>e.descriptor.lct.exists),{data:[{minCodeSize:at()},Mt]}]},i=>le()(i)===44),Ye=wt({text:[{codes:ut(2)},{blockSize:at()},{preData:(i,t,e)=>ut(e.text.blockSize)(i)},Mt]},i=>{var t=It(2)(i);return t[0]===33&&t[1]===1}),qe=wt({application:[{codes:ut(2)},{blockSize:at()},{id:(i,t,e)=>zt(e.blockSize)(i)},Mt]},i=>{var t=It(2)(i);return t[0]===33&&t[1]===255}),Qe=wt({comment:[{codes:ut(2)},Mt]},i=>{var t=It(2)(i);return t[0]===33&&t[1]===254}),tr=[{header:[{signature:zt(3)},{version:zt(3)}]},{lsd:[{width:yt(!0)},{height:yt(!0)},{gct:Ht({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:at()},{pixelAspectRatio:at()}]},wt({gct:ce(3,(i,t)=>Math.pow(2,t.lsd.gct.size+1))},(i,t)=>t.lsd.gct.exists),{frames:Xe([Ve,qe,Qe,We,Ye],i=>{var t=le()(i);return t===33||t===44})}],er=(i,t)=>{const e=new Array(i.length),r=i.length/t,n=function(u,f){const p=i.slice(f*t,(f+1)*t);e.splice.apply(e,[u*t,t].concat(p))},o=[0,4,2,1],a=[8,8,4,2];for(var s=0,l=0;l<4;l++)for(var c=o[l];c<r;c+=a[l])n(c,s),s++;return e},rr=(i,t,e)=>{const o=e;var a,s,l,c,u,f,p,b,C,y,d,T,m,A,O,P;const B=new Array(e),g=new Array(4096),v=new Array(4096),k=new Array(4096+1);for(T=i,s=1<<T,u=s+1,a=s+2,p=-1,c=T+1,l=(1<<c)-1,C=0;C<s;C++)g[C]=0,v[C]=C;var d,b,m,A,P,O;for(d=b=m=A=P=O=0,y=0;y<o;){if(A===0){if(b<c){d+=t[O]<<b,b+=8,O++;continue}if(C=d&l,d>>=c,b-=c,C>a||C==u)break;if(C==s){c=T+1,l=(1<<c)-1,a=s+2,p=-1;continue}if(p==-1){k[A++]=v[C],p=C,m=C;continue}for(f=C,C==a&&(k[A++]=m,C=p);C>s;)k[A++]=v[C],C=g[C];m=v[C]&255,k[A++]=m,a<4096&&(g[a]=p,v[a]=m,a++,(a&l)===0&&a<4096&&(c++,l+=a)),p=f}A--,B[P++]=k[A],y++}for(y=P;y<o;y++)B[y]=0;return B},nr=i=>{const t=new Uint8Array(i);return Tt(Ze(t),tr)},or=i=>{const t=i.pixels.length,e=new Uint8ClampedArray(t*4);for(var r=0;r<t;r++){const n=r*4,o=i.pixels[r],a=i.colorTable[o];e[n]=a[0],e[n+1]=a[1],e[n+2]=a[2],e[n+3]=o!==i.transparentIndex?255:0}return e},ir=(i,t,e)=>{if(!i.image){console.warn("gif frame does not have associated image.");return}const{image:r}=i,n=r.descriptor.width*r.descriptor.height;var o=rr(r.data.minCodeSize,r.data.blocks,n);r.descriptor.lct.interlaced&&(o=er(o,r.descriptor.width));const a={pixels:o,dims:{top:i.image.descriptor.top,left:i.image.descriptor.left,width:i.image.descriptor.width,height:i.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?a.colorTable=r.lct:a.colorTable=t,i.gce&&(a.delay=(i.gce.delay||10)*10,a.disposalType=i.gce.extras.disposal,i.gce.extras.transparentColorGiven&&(a.transparentIndex=i.gce.transparentColorIndex)),e&&(a.patch=or(a)),a},ar=(i,t)=>i.frames.filter(e=>e.image).map(e=>ir(e,i.gct,t));function sr(i,t,e){const r=ue(t),n=i-1;let o=0;switch(e){case tt.L:o=ct[n][0];break;case tt.M:o=ct[n][1];break;case tt.Q:o=ct[n][2];break;case tt.H:o=ct[n][3];break}return r<=o}function lr(i,t){for(var e=1,r=ue(i),n=0,o=ct.length;n<o;n++){var a=0;switch(t){case tt.L:a=ct[n][0];break;case tt.M:a=ct[n][1];break;case tt.Q:a=ct[n][2];break;case tt.H:a=ct[n][3];break}if(r<=a)break;e++}if(e>ct.length)throw new Error("Too long data");return e}function ue(i){var t=encodeURI(i).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(i)?3:0)}class cr{constructor(t){this.mode=ot.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const e=[];for(let r=0,n=this.data.length;r<n;r++){const o=[],a=this.data.charCodeAt(r);a>65536?(o[0]=240|(a&1835008)>>>18,o[1]=128|(a&258048)>>>12,o[2]=128|(a&4032)>>>6,o[3]=128|a&63):a>2048?(o[0]=224|(a&61440)>>>12,o[1]=128|(a&4032)>>>6,o[2]=128|a&63):a>128?(o[0]=192|(a&1984)>>>6,o[1]=128|a&63):o[0]=a,e.push(o)}this.parsedData=Array.prototype.concat.apply([],e),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}}class vt{constructor(t=-1,e=tt.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=lr(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!sr(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const e=new cr(t);this.dataList.push(e),this.dataCache=void 0}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=vt.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(let n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(dt).includes(this.maskPattern))return this.maskPattern;let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);const n=U.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=U.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++){const n=t[e],o=t[r];if(this.modules[n][o]==null)for(let a=-2;a<=2;a++)for(let s=-2;s<=2;s++)a==-2||a==2||s==-2||s==2||a==0&&s==0?this.modules[n+a][o+s]=!0:this.modules[n+a][o+s]=!1}}setupTypeNumber(t){const e=U.getBCHTypeNumber(this.typeNumber);for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}}setupTypeInfo(t,e){const r=this.errorCorrectLevel<<3|e,n=U.getBCHTypeInfo(r);for(var o=0;o<15;o++){var a=!t&&(n>>o&1)==1;o<6?this.modules[o][8]=a:o<8?this.modules[o+1][8]=a:this.modules[this.moduleCount-15+o][8]=a}for(var o=0;o<15;o++){var a=!t&&(n>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=a:o<9?this.modules[8][15-o-1+1]=a:this.modules[8][15-o-1]=a}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let r=-1,n=this.moduleCount-1,o=7,a=0;for(let s=this.moduleCount-1;s>0;s-=2)for(s==6&&s--;;){for(let l=0;l<2;l++)if(this.modules[n][s-l]==null){let c=!1;a<t.length&&(c=(t[a]>>>o&1)==1),U.getMask(e,n,s-l)&&(c=!c),this.modules[n][s-l]=c,o--,o==-1&&(a++,o=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}static createData(t,e,r){const n=gt.getRSBlocks(t,e),o=new ur;for(var a=0;a<r.length;a++){const l=r[a];o.put(l.mode,4),o.put(l.getLength(),U.getLengthInBits(l.mode,t)),l.write(o)}let s=0;for(var a=0;a<n.length;a++)s+=n[a].dataCount;if(o.getLengthInBits()>s*8)throw new Error(`code length overflow. (${o.getLengthInBits()}>${s*8})`);for(o.getLengthInBits()+4<=s*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=s*8||(o.put(vt.PAD0,8),o.getLengthInBits()>=s*8));)o.put(vt.PAD1,8);return vt.createBytes(o,n)}static createBytes(t,e){let r=0,n=0,o=0;const a=new Array(e.length),s=new Array(e.length);for(var l=0;l<e.length;l++){const C=e[l].dataCount,y=e[l].totalCount-C;n=Math.max(n,C),o=Math.max(o,y),a[l]=new Array(C);for(var c=0;c<a[l].length;c++)a[l][c]=255&t.buffer[c+r];r+=C;const T=U.getErrorCorrectPolynomial(y),g=new xt(a[l],T.getLength()-1).mod(T);s[l]=new Array(T.getLength()-1);for(var c=0;c<s[l].length;c++){const k=c+g.getLength()-s[l].length;s[l][c]=k>=0?g.get(k):0}}let u=0;for(var c=0;c<e.length;c++)u+=e[c].totalCount;const f=new Array(u);let p=0;for(var c=0;c<n;c++)for(var l=0;l<e.length;l++)c<a[l].length&&(f[p++]=a[l][c]);for(var c=0;c<o;c++)for(var l=0;l<e.length;l++)c<s[l].length&&(f[p++]=s[l][c]);return f}}vt.PAD0=236;vt.PAD1=17;const tt={L:1,M:0,Q:3,H:2},ot={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},dt={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class U{static getBCHTypeInfo(t){let e=t<<10;for(;U.getBCHDigit(e)-U.getBCHDigit(U.G15)>=0;)e^=U.G15<<U.getBCHDigit(e)-U.getBCHDigit(U.G15);return(t<<10|e)^U.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;U.getBCHDigit(e)-U.getBCHDigit(U.G18)>=0;)e^=U.G18<<U.getBCHDigit(e)-U.getBCHDigit(U.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;t!=0;)e++,t>>>=1;return e}static getPatternPosition(t){return U.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,r){switch(t){case dt.PATTERN000:return(e+r)%2==0;case dt.PATTERN001:return e%2==0;case dt.PATTERN010:return r%3==0;case dt.PATTERN011:return(e+r)%3==0;case dt.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case dt.PATTERN101:return e*r%2+e*r%3==0;case dt.PATTERN110:return(e*r%2+e*r%3)%2==0;case dt.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let e=new xt([1],0);for(let r=0;r<t;r++)e=e.multiply(new xt([1,V.gexp(r)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case ot.MODE_NUMBER:return 10;case ot.MODE_ALPHA_NUM:return 9;case ot.MODE_8BIT_BYTE:return 8;case ot.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(e<27)switch(t){case ot.MODE_NUMBER:return 12;case ot.MODE_ALPHA_NUM:return 11;case ot.MODE_8BIT_BYTE:return 16;case ot.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else if(e<41)switch(t){case ot.MODE_NUMBER:return 14;case ot.MODE_ALPHA_NUM:return 13;case ot.MODE_8BIT_BYTE:return 16;case ot.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}else throw new Error(`type:${e}`)}static getLostPoint(t){const e=t.getModuleCount();let r=0;for(var n=0;n<e;n++)for(var o=0;o<e;o++){let l=0;const c=t.isDark(n,o);for(let u=-1;u<=1;u++)if(!(n+u<0||e<=n+u))for(let f=-1;f<=1;f++)o+f<0||e<=o+f||u==0&&f==0||c==t.isDark(n+u,o+f)&&l++;l>5&&(r+=3+l-5)}for(var n=0;n<e-1;n++)for(var o=0;o<e-1;o++){let u=0;t.isDark(n,o)&&u++,t.isDark(n+1,o)&&u++,t.isDark(n,o+1)&&u++,t.isDark(n+1,o+1)&&u++,(u==0||u==4)&&(r+=3)}for(var n=0;n<e;n++)for(var o=0;o<e-6;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(var o=0;o<e;o++)for(var n=0;n<e-6;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);let a=0;for(var o=0;o<e;o++)for(var n=0;n<e;n++)t.isDark(n,o)&&a++;const s=Math.abs(100*a/e/e-50)/5;return r+=s*10,r}}U.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];U.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;U.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;U.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class V{static glog(t){if(t<1)throw new Error(`glog(${t})`);return V.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return V.EXP_TABLE[t]}}V.EXP_TABLE=new Array(256);V.LOG_TABLE=new Array(256);V._constructor=function(){for(var i=0;i<8;i++)V.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)V.EXP_TABLE[i]=V.EXP_TABLE[i-4]^V.EXP_TABLE[i-5]^V.EXP_TABLE[i-6]^V.EXP_TABLE[i-8];for(var i=0;i<255;i++)V.LOG_TABLE[V.EXP_TABLE[i]]=i}();class xt{constructor(t,e){if(t.length==null)throw new Error(`${t.length}/${e}`);let r=0;for(;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(let n=0;n<t.length-r;n++)this.num[n]=t[n+r]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const e=new Array(this.getLength()+t.getLength()-1);for(let r=0;r<this.getLength();r++)for(let n=0;n<t.getLength();n++)e[r+n]^=V.gexp(V.glog(this.get(r))+V.glog(t.get(n)));return new xt(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const e=V.glog(this.get(0))-V.glog(t.get(0)),r=new Array(this.getLength());for(var n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=V.gexp(V.glog(t.get(n))+e);return new xt(r,0).mod(t)}}class gt{constructor(t,e){this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){const r=gt.getRsBlockTable(t,e);if(r==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);const n=r.length/3,o=[];for(let a=0;a<n;a++){const s=r[a*3+0],l=r[a*3+1],c=r[a*3+2];for(let u=0;u<s;u++)o.push(new gt(l,c))}return o}static getRsBlockTable(t,e){switch(e){case tt.L:return gt.RS_BLOCK_TABLE[(t-1)*4+0];case tt.M:return gt.RS_BLOCK_TABLE[(t-1)*4+1];case tt.Q:return gt.RS_BLOCK_TABLE[(t-1)*4+2];case tt.H:return gt.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}gt.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class ur{constructor(){this.buffer=[],this.length=0}get(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1}put(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}const ct=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var fr=100,Y=256,Yt=Y-1,pt=4,fe=16,Kt=1<<fe,he=10,Xt=10,hr=Kt>>Xt,dr=Kt<<he-Xt,gr=Y>>3,Gt=6,pr=1<<Gt,vr=gr*pr,mr=30,de=10,St=1<<de,ge=8,qt=1<<ge,yr=de+ge,Ct=1<<yr,Qt=499,te=491,ee=487,pe=503,br=3*pe;function wr(i,t){var e,r,n,o,a;function s(){e=[],r=new Int32Array(256),n=new Int32Array(Y),o=new Int32Array(Y),a=new Int32Array(Y>>3);var g,v;for(g=0;g<Y;g++)v=(g<<pt+8)/Y,e[g]=new Float64Array([v,v,v,0]),o[g]=Kt/Y,n[g]=0}function l(){for(var g=0;g<Y;g++)e[g][0]>>=pt,e[g][1]>>=pt,e[g][2]>>=pt,e[g][3]=g}function c(g,v,k,d,b){e[v][0]-=g*(e[v][0]-k)/St,e[v][1]-=g*(e[v][1]-d)/St,e[v][2]-=g*(e[v][2]-b)/St}function u(g,v,k,d,b){for(var m=Math.abs(v-g),A=Math.min(v+g,Y),P=v+1,O=v-1,j=1,h,z;P<A||O>m;)z=a[j++],P<A&&(h=e[P++],h[0]-=z*(h[0]-k)/Ct,h[1]-=z*(h[1]-d)/Ct,h[2]-=z*(h[2]-b)/Ct),O>m&&(h=e[O--],h[0]-=z*(h[0]-k)/Ct,h[1]-=z*(h[1]-d)/Ct,h[2]-=z*(h[2]-b)/Ct)}function f(g,v,k){var d=2147483647,b=d,m=-1,A=m,P,O,j,h,z;for(P=0;P<Y;P++)O=e[P],j=Math.abs(O[0]-g)+Math.abs(O[1]-v)+Math.abs(O[2]-k),j<d&&(d=j,m=P),h=j-(n[P]>>fe-pt),h<b&&(b=h,A=P),z=o[P]>>Xt,o[P]-=z,n[P]+=z<<he;return o[m]+=hr,n[m]-=dr,A}function p(){var g,v,k,d,b,m,A=0,P=0;for(g=0;g<Y;g++){for(k=e[g],b=g,m=k[1],v=g+1;v<Y;v++)d=e[v],d[1]<m&&(b=v,m=d[1]);if(d=e[b],g!=b&&(v=d[0],d[0]=k[0],k[0]=v,v=d[1],d[1]=k[1],k[1]=v,v=d[2],d[2]=k[2],k[2]=v,v=d[3],d[3]=k[3],k[3]=v),m!=A){for(r[A]=P+g>>1,v=A+1;v<m;v++)r[v]=g;A=m,P=g}}for(r[A]=P+Yt>>1,v=A+1;v<256;v++)r[v]=Yt}function C(g,v,k){for(var d,b,m,A=1e3,P=-1,O=r[v],j=O-1;O<Y||j>=0;)O<Y&&(b=e[O],m=b[1]-v,m>=A?O=Y:(O++,m<0&&(m=-m),d=b[0]-g,d<0&&(d=-d),m+=d,m<A&&(d=b[2]-k,d<0&&(d=-d),m+=d,m<A&&(A=m,P=b[3])))),j>=0&&(b=e[j],m=v-b[1],m>=A?j=-1:(j--,m<0&&(m=-m),d=b[0]-g,d<0&&(d=-d),m+=d,m<A&&(d=b[2]-k,d<0&&(d=-d),m+=d,m<A&&(A=m,P=b[3]))));return P}function y(){var g,v=i.length,k=30+(t-1)/3,d=v/(3*t),b=~~(d/fr),m=St,A=vr,P=A>>Gt;for(P<=1&&(P=0),g=0;g<P;g++)a[g]=m*((P*P-g*g)*qt/(P*P));var O;v<br?(t=1,O=3):v%Qt!==0?O=3*Qt:v%te!==0?O=3*te:v%ee!==0?O=3*ee:O=3*pe;var j,h,z,E,G=0;for(g=0;g<d;)if(j=(i[G]&255)<<pt,h=(i[G+1]&255)<<pt,z=(i[G+2]&255)<<pt,E=f(j,h,z),c(m,E,j,h,z),P!==0&&u(P,E,j,h,z),G+=O,G>=v&&(G-=v),g++,b===0&&(b=1),g%b===0)for(m-=m/k,A-=A/mr,P=A>>Gt,P<=1&&(P=0),E=0;E<P;E++)a[E]=m*((P*P-E*E)*qt/(P*P))}function T(){s(),y(),l(),p()}this.buildColormap=T;function B(){for(var g=[],v=[],k=0;k<Y;k++)v[e[k][3]]=k;for(var d=0,b=0;b<Y;b++){var m=v[b];g[d++]=e[m][0],g[d++]=e[m][1],g[d++]=e[m][2]}return g}this.getColormap=B,this.lookupRGB=C}var re=-1,kt=12,Et=5003,Cr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function xr(i,t,e,r){var n=Math.max(2,r),o=new Uint8Array(256),a=new Int32Array(Et),s=new Int32Array(Et),l,c=0,u,f=0,p,C=!1,y,T,B,g,v,k;function d(E,G){o[u++]=E,u>=254&&O(G)}function b(E){m(Et),f=T+2,C=!0,z(T,E)}function m(E){for(var G=0;G<E;++G)a[G]=-1}function A(E,G){var w,ft,K,q,it,Z,rt;for(y=E,C=!1,k=y,p=j(k),T=1<<E-1,B=T+1,f=T+2,u=0,q=h(),rt=0,w=Et;w<65536;w*=2)++rt;rt=8-rt,Z=Et,m(Z),z(T,G);t:for(;(ft=h())!=re;){if(w=(ft<<kt)+q,K=ft<<rt^q,a[K]===w){q=s[K];continue}else if(a[K]>=0){it=Z-K,K===0&&(it=1);do if((K-=it)<0&&(K+=Z),a[K]===w){q=s[K];continue t}while(a[K]>=0)}z(q,G),q=ft,f<1<<kt?(s[K]=f++,a[K]=w):b(G)}z(q,G),z(B,G)}function P(E){E.writeByte(n),g=i*t,v=0,A(n+1,E),E.writeByte(0)}function O(E){u>0&&(E.writeByte(u),E.writeBytes(o,0,u),u=0)}function j(E){return(1<<E)-1}function h(){if(g===0)return re;--g;var E=e[v++];return E&255}function z(E,G){for(l&=Cr[c],c>0?l|=E<<c:l=E,c+=k;c>=8;)d(l&255,G),l>>=8,c-=8;if((f>p||C)&&(C?(p=j(k=y),C=!1):(++k,k==kt?p=1<<kt:p=j(k))),E==B){for(;c>0;)d(l&255,G),l>>=8,c-=8;O(G)}}this.encode=P}function et(){this.page=-1,this.pages=[],this.newPage()}et.pageSize=4096;et.charMap={};for(var Dt=0;Dt<256;Dt++)et.charMap[Dt]=String.fromCharCode(Dt);et.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(et.pageSize),this.cursor=0};et.prototype.getData=function(){for(var i="",t=0;t<this.pages.length;t++)for(var e=0;e<et.pageSize;e++)i+=et.charMap[this.pages[t][e]];return i};et.prototype.toFlattenUint8Array=function(){const i=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const r=Uint8Array.from(this.pages[t].slice(0,this.cursor));i.push(r)}else i.push(this.pages[t]);const e=new Uint8Array(i.reduce((r,n)=>r+n.length,0));return i.reduce((r,n)=>(e.set(n,r),r+n.length),0),e};et.prototype.writeByte=function(i){this.cursor>=et.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=i};et.prototype.writeUTFBytes=function(i){for(var t=i.length,e=0;e<t;e++)this.writeByte(i.charCodeAt(e))};et.prototype.writeBytes=function(i,t,e){for(var r=e||i.length,n=t||0;n<r;n++)this.writeByte(i[n])};function H(i,t){this.width=~~i,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new et}H.prototype.setDelay=function(i){this.delay=Math.round(i/10)};H.prototype.setFrameRate=function(i){this.delay=Math.round(100/i)};H.prototype.setDispose=function(i){i>=0&&(this.dispose=i)};H.prototype.setRepeat=function(i){this.repeat=i};H.prototype.setTransparent=function(i){this.transparent=i};H.prototype.addFrame=function(i){this.image=i,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};H.prototype.finish=function(){this.out.writeByte(59)};H.prototype.setQuality=function(i){i<1&&(i=1),this.sample=i};H.prototype.setDither=function(i){i===!0&&(i="FloydSteinberg"),this.dither=i};H.prototype.setGlobalPalette=function(i){this.globalPalette=i};H.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};H.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};H.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new wr(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};H.prototype.indexPixels=function(i){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,r=0;r<t;r++){var n=this.findClosestRGB(this.pixels[e++]&255,this.pixels[e++]&255,this.pixels[e++]&255);this.usedEntry[n]=!0,this.indexedPixels[r]=n}};H.prototype.ditherPixels=function(i,t){var e={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!i||!e[i])throw"Unknown dithering kernel: "+i;var r=e[i],n=0,o=this.height,a=this.width,s=this.pixels,l=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<o;c++){t&&(l=l*-1);for(var u=l==1?0:a-1,f=l==1?a:0;u!==f;u+=l){n=c*a+u;var p=n*3,C=s[p],y=s[p+1],T=s[p+2];p=this.findClosestRGB(C,y,T),this.usedEntry[p]=!0,this.indexedPixels[n]=p,p*=3;for(var B=this.colorTab[p],g=this.colorTab[p+1],v=this.colorTab[p+2],k=C-B,d=y-g,b=T-v,m=l==1?0:r.length-1,A=l==1?r.length:0;m!==A;m+=l){var P=r[m][1],O=r[m][2];if(P+u>=0&&P+u<a&&O+c>=0&&O+c<o){var j=r[m][0];p=n+P+O*a,p*=3,s[p]=Math.max(0,Math.min(255,s[p]+k*j)),s[p+1]=Math.max(0,Math.min(255,s[p+1]+d*j)),s[p+2]=Math.max(0,Math.min(255,s[p+2]+b*j))}}}}};H.prototype.findClosest=function(i,t){return this.findClosestRGB((i&16711680)>>16,(i&65280)>>8,i&255,t)};H.prototype.findClosestRGB=function(i,t,e,r){if(this.colorTab===null)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(i,t,e);for(var n=0,o=256*256*256,a=this.colorTab.length,s=0,l=0;s<a;l++){var c=i-(this.colorTab[s++]&255),u=t-(this.colorTab[s++]&255),f=e-(this.colorTab[s++]&255),p=c*c+u*u+f*f;(!r||this.usedEntry[l])&&p<o&&(o=p,n=l)}return n};H.prototype.getImagePixels=function(){var i=this.width,t=this.height;this.pixels=new Uint8Array(i*t*3);for(var e=this.image,r=0,n=0,o=0;o<t;o++)for(var a=0;a<i;a++)this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],r++};H.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var i,t;this.transparent===null?(i=0,t=0):(i=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|i),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};H.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};H.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};H.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};H.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var i=3*256-this.colorTab.length,t=0;t<i;t++)this.out.writeByte(0)};H.prototype.writeShort=function(i){this.out.writeByte(i&255),this.out.writeByte(i>>8&255)};H.prototype.writePixels=function(){var i=new xr(this.width,this.height,this.indexedPixels,this.colorDepth);i.encode(this.out)};H.prototype.stream=function(){return this.out};var Ar=globalThis&&globalThis.__awaiter||function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(a){a(o)})}return new(e||(e=Promise))(function(o,a){function s(u){try{c(r.next(u))}catch(f){a(f)}}function l(u){try{c(r.throw(u))}catch(f){a(f)}}function c(u){u.done?o(u.value):n(u.value).then(s,l)}c((r=r.apply(i,t||[])).next())})};const{Canvas:ht}=Ke,Bt=.4;function ne(i){if(!i)return;function t(e){e.onload=null,e.onerror=null}return new Promise(function(e,r){if(i.slice(0,4)=="data"){let o=new Image;o.onload=function(){e(o),t(o)},o.onerror=function(){r("Image load error"),t(o)},o.src=i;return}let n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){e(n)},n.onerror=function(){r("Image load error")},n.src=i})}class ${constructor(t){const e=Object.assign({},t);if(Object.keys($.defaultOptions).forEach(r=>{r in e||Object.defineProperty(e,r,{value:$.defaultOptions[r],enumerable:!0,writable:!0})}),e.components?typeof e.components=="object"&&Object.keys($.defaultComponentOptions).forEach(r=>{r in e.components?Object.defineProperty(e.components,r,{value:Object.assign(Object.assign({},$.defaultComponentOptions[r]),e.components[r]),enumerable:!0,writable:!0}):Object.defineProperty(e.components,r,{value:$.defaultComponentOptions[r],enumerable:!0,writable:!0})}):e.components=$.defaultComponentOptions,e.dotScale!==null&&e.dotScale!==void 0){if(e.dotScale<=0||e.dotScale>1)throw new Error("dotScale should be in range (0, 1].");e.components.data.scale=e.dotScale,e.components.timing.scale=e.dotScale,e.components.alignment.scale=e.dotScale}this.options=e,this.canvas=new ht(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new vt(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,e,r,n,o,a){t.beginPath(),t.moveTo(e,r),t.arcTo(e+n,r,e+n,r+o,a),t.arcTo(e+n,r+o,e,r+o,a),t.arcTo(e,r+o,e,r,a),t.arcTo(e,r,e+n,r,a),t.closePath()}static _getAverageRGB(t){const r={r:0,g:0,b:0};let n,o,a=-4;const s={r:0,g:0,b:0};let l=0;o=t.naturalHeight||t.height,n=t.naturalWidth||t.width;const u=new ht(n,o).getContext("2d");if(!u)return r;u.drawImage(t,0,0);let f;try{f=u.getImageData(0,0,n,o)}catch{return r}for(;(a+=5*4)<f.data.length;)f.data[a]>200||f.data[a+1]>200||f.data[a+2]>200||(++l,s.r+=f.data[a],s.g+=f.data[a+1],s.b+=f.data[a+2]);return s.r=~~(s.r/l),s.g=~~(s.g/l),s.b=~~(s.b/l),s}static _drawDot(t,e,r,n,o=0,a=1){t.fillRect((e+o)*n,(r+o)*n,a*n,a*n)}static _drawAlignProtector(t,e,r,n){t.clearRect((e-2)*n,(r-2)*n,5*n,5*n),t.fillRect((e-2)*n,(r-2)*n,5*n,5*n)}static _drawAlign(t,e,r,n,o=0,a=1,s,l){const c=t.fillStyle;t.fillStyle=s,new Array(4).fill(0).map((u,f)=>{$._drawDot(t,e-2+f,r-2,n,o,a),$._drawDot(t,e+2,r-2+f,n,o,a),$._drawDot(t,e+2-f,r+2,n,o,a),$._drawDot(t,e-2,r+2-f,n,o,a)}),$._drawDot(t,e,r,n,o,a),l||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((u,f)=>{$._drawDot(t,e-1+f,r-1,n,o,a),$._drawDot(t,e+1,r-1+f,n,o,a),$._drawDot(t,e+1-f,r+1,n,o,a),$._drawDot(t,e-1,r+1-f,n,o,a)})),t.fillStyle=c}_draw(){var t,e,r,n,o,a,s,l,c,u,f,p,C,y,T,B,g,v,k;return Ar(this,void 0,void 0,function*(){const d=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,b=this.options.size;let m=this.options.margin;(m<0||m*2>=b)&&(m=0);const A=Math.ceil(m),P=b-2*m,O=this.options.whiteMargin,j=this.options.backgroundDimming,h=Math.ceil(P/d),z=h*d,E=z+2*A,G=new ht(E,E),w=G.getContext("2d");this._clear(),w.save(),w.translate(A,A);const ft=new ht(E,E),K=ft.getContext("2d");let q=null,it=[];if(this.options.gifBackground){const D=nr(this.options.gifBackground);if(q=D,it=ar(D,!0),this.options.autoColor){let I=0,N=0,R=0,W=0;for(let X=0;X<it[0].colorTable.length;X++){const J=it[0].colorTable[X];J[0]>200||J[1]>200||J[2]>200||J[0]===0&&J[1]===0&&J[2]===0||(W++,I+=J[0],N+=J[1],R+=J[2])}I=~~(I/W),N=~~(N/W),R=~~(R/W),this.options.colorDark=`rgb(${I},${N},${R})`}}else if(this.options.backgroundImage){const D=yield ne(this.options.backgroundImage);if(this.options.autoColor){const I=$._getAverageRGB(D);this.options.colorDark=`rgb(${I.r},${I.g},${I.b})`}K.drawImage(D,0,0,D.width,D.height,0,0,E,E),K.rect(0,0,E,E),K.fillStyle=j,K.fill()}else K.rect(0,0,E,E),K.fillStyle=this.options.colorLight,K.fill();const Z=U.getPatternPosition(this.qrCode.typeNumber),rt=((r=(e=this.options.components)===null||e===void 0?void 0:e.data)===null||r===void 0?void 0:r.scale)||Bt,M=(1-rt)*.5;for(let D=0;D<d;D++)for(let I=0;I<d;I++){const N=this.qrCode.isDark(D,I),R=I<8&&(D<8||D>=d-8)||I>=d-8&&D<8,W=D==6&&I>=8&&I<=d-8||I==6&&D>=8&&D<=d-8;let X=R||W;for(let Q=1;Q<Z.length-1;Q++)X=X||D>=Z[Q]-2&&D<=Z[Q]+2&&I>=Z[Q]-2&&I<=Z[Q]+2;const J=I*h+(X?0:M*h),st=D*h+(X?0:M*h);if(w.strokeStyle=N?this.options.colorDark:this.options.colorLight,w.lineWidth=.5,w.fillStyle=N?this.options.colorDark:this.options.colorLight,Z.length===0)X||w.fillRect(J,st,(X?1:rt)*h,(X?1:rt)*h);else{const Q=I<d-4&&I>=d-4-5&&D<d-4&&D>=d-4-5;!X&&!Q&&w.fillRect(J,st,(X?1:rt)*h,(X?1:rt)*h)}}const x=Z[Z.length-1],S=this.options.colorLight;if(w.fillStyle=S,w.fillRect(0,0,8*h,8*h),w.fillRect(0,(d-8)*h,8*h,8*h),w.fillRect((d-8)*h,0,8*h,8*h),!((o=(n=this.options.components)===null||n===void 0?void 0:n.timing)===null||o===void 0)&&o.protectors&&(w.fillRect(8*h,6*h,(d-8-8)*h,h),w.fillRect(6*h,8*h,h,(d-8-8)*h)),!((s=(a=this.options.components)===null||a===void 0?void 0:a.cornerAlignment)===null||s===void 0)&&s.protectors&&$._drawAlignProtector(w,x,x,h),!((c=(l=this.options.components)===null||l===void 0?void 0:l.alignment)===null||c===void 0)&&c.protectors)for(let D=0;D<Z.length;D++)for(let I=0;I<Z.length;I++){const N=Z[I],R=Z[D];if(!(N===6&&(R===6||R===x))){if(R===6&&(N===6||N===x))continue;if(N===x&&R===x)continue;$._drawAlignProtector(w,N,R,h)}}w.fillStyle=this.options.colorDark,w.fillRect(0,0,7*h,h),w.fillRect((d-7)*h,0,7*h,h),w.fillRect(0,6*h,7*h,h),w.fillRect((d-7)*h,6*h,7*h,h),w.fillRect(0,(d-7)*h,7*h,h),w.fillRect(0,(d-7+6)*h,7*h,h),w.fillRect(0,0,h,7*h),w.fillRect(6*h,0,h,7*h),w.fillRect((d-7)*h,0,h,7*h),w.fillRect((d-7+6)*h,0,h,7*h),w.fillRect(0,(d-7)*h,h,7*h),w.fillRect(6*h,(d-7)*h,h,7*h),w.fillRect(2*h,2*h,3*h,3*h),w.fillRect((d-7+2)*h,2*h,3*h,3*h),w.fillRect(2*h,(d-7+2)*h,3*h,3*h);const _=((f=(u=this.options.components)===null||u===void 0?void 0:u.timing)===null||f===void 0?void 0:f.scale)||Bt,L=(1-_)*.5;for(let D=0;D<d-8;D+=2)$._drawDot(w,8+D,6,h,L,_),$._drawDot(w,6,8+D,h,L,_);const F=((C=(p=this.options.components)===null||p===void 0?void 0:p.cornerAlignment)===null||C===void 0?void 0:C.scale)||Bt,nt=(1-F)*.5;$._drawAlign(w,x,x,h,nt,F,this.options.colorDark,((T=(y=this.options.components)===null||y===void 0?void 0:y.cornerAlignment)===null||T===void 0?void 0:T.protectors)||!1);const mt=((g=(B=this.options.components)===null||B===void 0?void 0:B.alignment)===null||g===void 0?void 0:g.scale)||Bt,Zt=(1-mt)*.5;for(let D=0;D<Z.length;D++)for(let I=0;I<Z.length;I++){const N=Z[I],R=Z[D];if(!(N===6&&(R===6||R===x))){if(R===6&&(N===6||N===x))continue;if(N===x&&R===x)continue;$._drawAlign(w,N,R,h,Zt,mt,this.options.colorDark,((k=(v=this.options.components)===null||v===void 0?void 0:v.alignment)===null||k===void 0?void 0:k.protectors)||!1)}}if(O&&(w.fillStyle=this.options.backgroundColor,w.fillRect(-A,-A,E,A),w.fillRect(-A,z,E,A),w.fillRect(z,-A,A,E),w.fillRect(-A,-A,A,E)),this.options.logoImage){const D=yield ne(this.options.logoImage);let I=this.options.logoScale,N=this.options.logoMargin,R=this.options.logoCornerRadius;(I<=0||I>=1)&&(I=.2),N<0&&(N=0),R<0&&(R=0);const W=z*I,X=.5*(E-W),J=X;w.restore(),w.fillStyle=this.options.logoBackgroundColor,w.save(),$._prepareRoundedCornerClip(w,X-N,J-N,W+2*N,W+2*N,R+N),w.clip();const st=w.globalCompositeOperation;w.globalCompositeOperation="destination-out",w.fill(),w.globalCompositeOperation=st,w.restore(),w.save(),$._prepareRoundedCornerClip(w,X,J,W,W,R),w.clip(),w.drawImage(D,X,J,W,W),w.restore(),w.save(),w.translate(A,A)}if(q){let D,I,N,R,W,X;if(it.forEach(function(J){D||(D=new H(b,b),D.setDelay(J.delay),D.setRepeat(0));const{width:st,height:Q}=J.dims;I||(I=new ht(st,Q),N=I.getContext("2d"),N.rect(0,0,I.width,I.height),N.fillStyle="#ffffff",N.fill()),(!R||!X||st!==R.width||Q!==R.height)&&(R=new ht(st,Q),W=R.getContext("2d"),X=W.createImageData(st,Q)),X.data.set(J.patch),W.putImageData(X,0,0),N.drawImage(R.getContext("2d").canvas,J.dims.left,J.dims.top);const Pt=new ht(E,E),At=Pt.getContext("2d");At.drawImage(I.getContext("2d").canvas,0,0,E,E),At.rect(0,0,E,E),At.fillStyle=j,At.fill(),At.drawImage(G.getContext("2d").canvas,0,0,E,E);const Ot=new ht(b,b),Jt=Ot.getContext("2d");Jt.drawImage(Pt.getContext("2d").canvas,0,0,b,b),D.addFrame(Jt.getImageData(0,0,Ot.width,Ot.height).data)}),!D)throw new Error("No frames.");if(D.finish(),oe(this.canvas)){const st=D.stream().toFlattenUint8Array().reduce((Q,Pt)=>Q+String.fromCharCode(Pt),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(st)}`)}return Promise.resolve(Buffer.from(D.stream().toFlattenUint8Array()))}else{K.drawImage(G.getContext("2d").canvas,0,0,E,E),w.drawImage(ft.getContext("2d").canvas,-A,-A,E,E);const D=new ht(b,b);D.getContext("2d").drawImage(G.getContext("2d").canvas,0,0,b,b),this.canvas=D;const N=this.options.gifBackground?"gif":"png";return oe(this.canvas)?Promise.resolve(this.canvas.toDataURL(N)):Promise.resolve(this.canvas.toBuffer(N))}})}}$.CorrectLevel=tt;$.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};$.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:tt.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:$.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function oe(i){try{return i instanceof HTMLElement}catch{return typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object"}}const Er={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const e=await Ae(this.gifBgSrc),r=this.logoSrc;this.render(void 0,r,e);return}const i=this.bgSrc,t=this.logoSrc;this.render(i,t)},async render(i,t,e){const r=this;new $({gifBackground:e,text:r.text,size:r.size,margin:r.margin,colorDark:r.colorDark,colorLight:r.colorLight,backgroundColor:r.backgroundColor,backgroundImage:i,backgroundDimming:r.backgroundDimming,logoImage:t,logoScale:r.logoScale,logoBackgroundColor:r.logoBackgroundColor,correctLevel:r.correctLevel,logoMargin:r.logoMargin,logoCornerRadius:r.logoCornerRadius,whiteMargin:Ft(r.whiteMargin),dotScale:r.dotScale,autoColor:Ft(r.autoColor),binarize:Ft(r.binarize),binarizeThreshold:r.binarizeThreshold,components:r.components}).draw().then(n=>{this.imgUrl=n,r.callback&&r.callback(n,r.qid)})}}},Tr=["src"];function Pr(i,t,e,r,n,o){return e.bindElement?(ye(),be("img",{key:0,style:{display:"inline-block"},src:n.imgUrl},null,8,Tr)):we("",!0)}const Br=me(Er,[["render",Pr]]);var ve={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT  Zeno Rocha
 */(function(i,t){(function(r,n){i.exports=n()})(Ce,function(){return function(){var e={686:function(o,a,s){s.d(a,{default:function(){return rt}});var l=s(279),c=s.n(l),u=s(370),f=s.n(u),p=s(817),C=s.n(p);function y(M){try{return document.execCommand(M)}catch{return!1}}var T=function(x){var S=C()(x);return y("cut"),S},B=T;function g(M){var x=document.documentElement.getAttribute("dir")==="rtl",S=document.createElement("textarea");S.style.fontSize="12pt",S.style.border="0",S.style.padding="0",S.style.margin="0",S.style.position="absolute",S.style[x?"right":"left"]="-9999px";var _=window.pageYOffset||document.documentElement.scrollTop;return S.style.top="".concat(_,"px"),S.setAttribute("readonly",""),S.value=M,S}var v=function(x,S){var _=g(x);S.container.appendChild(_);var L=C()(_);return y("copy"),_.remove(),L},k=function(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},_="";return typeof x=="string"?_=v(x,S):x instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(x==null?void 0:x.type)?_=v(x.value,S):(_=C()(x),y("copy")),_},d=k;function b(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(S){return typeof S}:b=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},b(M)}var m=function(){var x=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=x.action,_=S===void 0?"copy":S,L=x.container,F=x.target,nt=x.text;if(_!=="copy"&&_!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(F!==void 0)if(F&&b(F)==="object"&&F.nodeType===1){if(_==="copy"&&F.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(_==="cut"&&(F.hasAttribute("readonly")||F.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(nt)return d(nt,{container:L});if(F)return _==="cut"?B(F):d(F,{container:L})},A=m;function P(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?P=function(S){return typeof S}:P=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},P(M)}function O(M,x){if(!(M instanceof x))throw new TypeError("Cannot call a class as a function")}function j(M,x){for(var S=0;S<x.length;S++){var _=x[S];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}function h(M,x,S){return x&&j(M.prototype,x),S&&j(M,S),M}function z(M,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(x&&x.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),x&&E(M,x)}function E(M,x){return E=Object.setPrototypeOf||function(_,L){return _.__proto__=L,_},E(M,x)}function G(M){var x=K();return function(){var _=q(M),L;if(x){var F=q(this).constructor;L=Reflect.construct(_,arguments,F)}else L=_.apply(this,arguments);return w(this,L)}}function w(M,x){return x&&(P(x)==="object"||typeof x=="function")?x:ft(M)}function ft(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function K(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function q(M){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},q(M)}function it(M,x){var S="data-clipboard-".concat(M);if(!!x.hasAttribute(S))return x.getAttribute(S)}var Z=function(M){z(S,M);var x=G(S);function S(_,L){var F;return O(this,S),F=x.call(this),F.resolveOptions(L),F.listenClick(_),F}return h(S,[{key:"resolveOptions",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof L.action=="function"?L.action:this.defaultAction,this.target=typeof L.target=="function"?L.target:this.defaultTarget,this.text=typeof L.text=="function"?L.text:this.defaultText,this.container=P(L.container)==="object"?L.container:document.body}},{key:"listenClick",value:function(L){var F=this;this.listener=f()(L,"click",function(nt){return F.onClick(nt)})}},{key:"onClick",value:function(L){var F=L.delegateTarget||L.currentTarget,nt=this.action(F)||"copy",mt=A({action:nt,container:this.container,target:this.target(F),text:this.text(F)});this.emit(mt?"success":"error",{action:nt,text:mt,trigger:F,clearSelection:function(){F&&F.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(L){return it("action",L)}},{key:"defaultTarget",value:function(L){var F=it("target",L);if(F)return document.querySelector(F)}},{key:"defaultText",value:function(L){return it("text",L)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(L){var F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return d(L,F)}},{key:"cut",value:function(L){return B(L)}},{key:"isSupported",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],F=typeof L=="string"?[L]:L,nt=!!document.queryCommandSupported;return F.forEach(function(mt){nt=nt&&!!document.queryCommandSupported(mt)}),nt}}]),S}(c()),rt=Z},828:function(o){var a=9;if(typeof Element<"u"&&!Element.prototype.matches){var s=Element.prototype;s.matches=s.matchesSelector||s.mozMatchesSelector||s.msMatchesSelector||s.oMatchesSelector||s.webkitMatchesSelector}function l(c,u){for(;c&&c.nodeType!==a;){if(typeof c.matches=="function"&&c.matches(u))return c;c=c.parentNode}}o.exports=l},438:function(o,a,s){var l=s(828);function c(p,C,y,T,B){var g=f.apply(this,arguments);return p.addEventListener(y,g,B),{destroy:function(){p.removeEventListener(y,g,B)}}}function u(p,C,y,T,B){return typeof p.addEventListener=="function"?c.apply(null,arguments):typeof y=="function"?c.bind(null,document).apply(null,arguments):(typeof p=="string"&&(p=document.querySelectorAll(p)),Array.prototype.map.call(p,function(g){return c(g,C,y,T,B)}))}function f(p,C,y,T){return function(B){B.delegateTarget=l(B.target,C),B.delegateTarget&&T.call(p,B)}}o.exports=u},879:function(o,a){a.node=function(s){return s!==void 0&&s instanceof HTMLElement&&s.nodeType===1},a.nodeList=function(s){var l=Object.prototype.toString.call(s);return s!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in s&&(s.length===0||a.node(s[0]))},a.string=function(s){return typeof s=="string"||s instanceof String},a.fn=function(s){var l=Object.prototype.toString.call(s);return l==="[object Function]"}},370:function(o,a,s){var l=s(879),c=s(438);function u(y,T,B){if(!y&&!T&&!B)throw new Error("Missing required arguments");if(!l.string(T))throw new TypeError("Second argument must be a String");if(!l.fn(B))throw new TypeError("Third argument must be a Function");if(l.node(y))return f(y,T,B);if(l.nodeList(y))return p(y,T,B);if(l.string(y))return C(y,T,B);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function f(y,T,B){return y.addEventListener(T,B),{destroy:function(){y.removeEventListener(T,B)}}}function p(y,T,B){return Array.prototype.forEach.call(y,function(g){g.addEventListener(T,B)}),{destroy:function(){Array.prototype.forEach.call(y,function(g){g.removeEventListener(T,B)})}}}function C(y,T,B){return c(document.body,y,T,B)}o.exports=u},817:function(o){function a(s){var l;if(s.nodeName==="SELECT")s.focus(),l=s.value;else if(s.nodeName==="INPUT"||s.nodeName==="TEXTAREA"){var c=s.hasAttribute("readonly");c||s.setAttribute("readonly",""),s.select(),s.setSelectionRange(0,s.value.length),c||s.removeAttribute("readonly"),l=s.value}else{s.hasAttribute("contenteditable")&&s.focus();var u=window.getSelection(),f=document.createRange();f.selectNodeContents(s),u.removeAllRanges(),u.addRange(f),l=u.toString()}return l}o.exports=a},279:function(o){function a(){}a.prototype={on:function(s,l,c){var u=this.e||(this.e={});return(u[s]||(u[s]=[])).push({fn:l,ctx:c}),this},once:function(s,l,c){var u=this;function f(){u.off(s,f),l.apply(c,arguments)}return f._=l,this.on(s,f,c)},emit:function(s){var l=[].slice.call(arguments,1),c=((this.e||(this.e={}))[s]||[]).slice(),u=0,f=c.length;for(u;u<f;u++)c[u].fn.apply(c[u].ctx,l);return this},off:function(s,l){var c=this.e||(this.e={}),u=c[s],f=[];if(u&&l)for(var p=0,C=u.length;p<C;p++)u[p].fn!==l&&u[p].fn._!==l&&f.push(u[p]);return f.length?c[s]=f:delete c[s],this}},o.exports=a,o.exports.TinyEmitter=a}},r={};function n(o){if(r[o])return r[o].exports;var a=r[o]={exports:{}};return e[o](a,a.exports,n),a.exports}return function(){n.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return n.d(a,{a}),a}}(),function(){n.d=function(o,a){for(var s in a)n.o(a,s)&&!n.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:a[s]})}}(),function(){n.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)}}(),n(686)}().default})})(ve);const Sr=xe(ve.exports),_r=i=>{const t=(i==null?void 0:i.appendToBody)===void 0?!0:i.appendToBody;return{toClipboard(e,r){return new Promise((n,o)=>{const a=document.createElement("button"),s=new Sr(a,{text:()=>e,action:()=>"copy",container:r!==void 0?r:document.body});s.on("success",l=>{s.destroy(),n(l)}),s.on("error",l=>{s.destroy(),o(l)}),t&&document.body.appendChild(a),a.click(),t&&document.body.removeChild(a)})}}};export{_r as u,Br as v};
