import{b as E,M as G,r as B,c as u,d as S,o as d,k as m,h as l,g as t,m as g,w as N,G as v,e as _,R as I,Q as P,l as Q,i as T,O as A,n as $,E as j,u as H,F as J,D as W,j as z,f as D,P as X}from"./index.228bd18a.js";const Y={key:0,class:"g-green"},Z={key:1,class:"g-red"},ee={key:2,class:"g-purple"},te={key:3,class:"g-red"},le={__name:"EditView",props:{modelValue:{type:Boolean,default:!1},data:{type:Object}},emits:["update:modelValue","success"],setup(K,{emit:b}){const o=K,V=E(!1),s=G({get:()=>o.modelValue,set:w=>{b("update:modelValue",w)}}),n=B({id:0,tl_content:""}),U=()=>{n.id=o.data.id,n.tl_content=o.data.tl_content},k=async()=>{if(V.value)return;V.value=!0;const{success:w,data:c}=await $.editTranslate(n);V.value=!1,w&&(b("success"),j.success(c.msg),s.value=!1)};return(w,c)=>{const p=u("el-form-item"),a=u("el-col"),i=u("el-row"),h=u("el-input"),f=u("el-form"),y=u("el-button"),C=u("el-dialog"),L=S("loading");return d(),m(C,{modelValue:T(s),"onUpdate:modelValue":c[4]||(c[4]=r=>A(s)?s.value=r:null),top:"2vh",title:"\u7F16\u8F91",onOpen:U,draggable:"","close-on-click-modal":!1,width:"680px"},{footer:l(()=>[t(y,{size:"default",onClick:c[3]||(c[3]=r=>s.value=!1)},{default:l(()=>[g("\u53D6 \u6D88")]),_:1}),t(y,{size:"default",type:"primary",onClick:k},{default:l(()=>[g("\u786E \u8BA4")]),_:1})]),default:l(()=>[N((d(),m(f,{size:"default",model:n,"label-width":"90px"},{default:l(()=>[t(i,{gutter:24},{default:l(()=>[t(a,{span:12},{default:l(()=>[t(p,{label:"id"},{default:l(()=>[g(v(o.data.id),1)]),_:1})]),_:1}),t(a,{span:12},{default:l(()=>[t(p,{label:"\u8BED\u8A00"},{default:l(()=>[g(v(o.data.tl),1)]),_:1})]),_:1})]),_:1}),t(i,{gutter:24},{default:l(()=>[t(a,{span:12},{default:l(()=>[t(p,{label:"MD5"},{default:l(()=>[g(v(o.data.md5),1)]),_:1})]),_:1}),t(a,{span:12},{default:l(()=>[t(p,{label:"\u7C7B\u578B"},{default:l(()=>[o.data.type==0?(d(),_("span",Y,"\u6587\u5B57")):o.data.type==1?(d(),_("span",Z,"\u5BCC\u6587\u672C")):o.data.type==2?(d(),_("span",ee,"\u56FE\u7247")):(d(),_("span",te,"\u5F02\u5E38"))]),_:1})]),_:1})]),_:1}),t(p,{label:"\u5185\u5BB9",prop:"tl_content"},{default:l(()=>[o.data.type==0?(d(),m(h,{key:0,type:"textarea",rows:4,modelValue:n.tl_content,"onUpdate:modelValue":c[0]||(c[0]=r=>n.tl_content=r),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",autocomplete:"off"},null,8,["modelValue"])):o.data.type==1?(d(),m(I,{key:1,modelValue:n.tl_content,"onUpdate:modelValue":c[1]||(c[1]=r=>n.tl_content=r)},null,8,["modelValue"])):o.data.type==2?(d(),m(P,{key:2,modelValue:n.tl_content,"onUpdate:modelValue":c[2]||(c[2]=r=>n.tl_content=r)},null,8,["modelValue"])):Q("",!0)]),_:1})]),_:1},8,["model"])),[[L,V.value]])]),_:1},8,["modelValue"])}}},ae=D("div",{class:"g-flex"},[D("span",null,"\u7FFB\u8BD1\u5217\u8868")],-1),oe={key:0,class:"g-red"},ne={key:1,class:"g-green"},se={key:2,class:"g-red"},de={key:0,class:"g-green"},re={key:1,class:"g-purple"},ue={key:2,class:"g-purple"},ie={key:3,class:"g-red"},pe=["onClick"],ce=["onClick"],_e={key:1},fe={__name:"IndexView",setup(K){const b=H(),o=B({loading:!1,total:0,list:[],langList:[]});(async()=>{o.loading=!0;const{success:p,data:a}=await $.getLangList();o.loading=!1,p&&(o.langList=a.list)})();const s=B({type:"",lang:"",md5:"",content:"",tl_content:"",status:"",page:1,limit:15}),n=async(p=!0)=>{p&&(s.page=1),o.loading=!0;const{success:a,data:i}=await $.getTranslateList(s);o.loading=!1,a&&(o.list=i.list,o.total=i.total)},U=p=>{X.confirm("\u786E\u8BA4\u5220\u9664\u6570\u636E?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{o.loading=!0;const{success:a,data:i}=await $.delTranslate({id:p.id});o.loading=!1,a&&(j.success(i.msg),await n(!1))})},k=E(!1),w=p=>{o.row=p,k.value=!0},c=p=>{s.md5=p,n()};return n(),(p,a)=>{const i=u("el-option"),h=u("el-select"),f=u("el-form-item"),y=u("el-input"),C=u("el-button"),L=u("el-form"),r=u("el-table-column"),M=u("el-image"),O=u("el-table"),F=u("el-pagination"),R=u("el-card"),q=S("loading");return d(),m(R,null,{header:l(()=>[ae]),default:l(()=>[t(L,{inline:!0},{default:l(()=>[t(f,{label:"\u72B6\u6001"},{default:l(()=>[t(h,{modelValue:s.type,"onUpdate:modelValue":a[0]||(a[0]=e=>s.type=e),onChange:n},{default:l(()=>[t(i,{label:"\u5168\u90E8",value:""}),t(i,{label:"\u6587\u5B57",value:"0"}),t(i,{label:"\u5BCC\u6587\u672C",value:"1"}),t(i,{label:"\u56FE\u7247",value:"2"})]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u72B6\u6001"},{default:l(()=>[t(h,{modelValue:s.status,"onUpdate:modelValue":a[1]||(a[1]=e=>s.status=e),onChange:n},{default:l(()=>[t(i,{label:"\u5168\u90E8",value:""}),t(i,{label:"\u7FFB\u8BD1\u6210\u529F",value:"1"}),t(i,{label:"\u7FFB\u8BD1\u5931\u8D25",value:"0"})]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u8BED\u8A00"},{default:l(()=>[t(h,{modelValue:s.lang,"onUpdate:modelValue":a[2]||(a[2]=e=>s.lang=e),onChange:n},{default:l(()=>[t(i,{label:"\u5168\u90E8",value:""}),(d(!0),_(J,null,W(o.langList,e=>(d(),m(i,{key:e.id,label:e.name,value:e.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"\u539F\u6587"},{default:l(()=>[t(y,{modelValue:s.content,"onUpdate:modelValue":a[3]||(a[3]=e=>s.content=e),onKeyup:z(n,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587",onClear:n,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),t(f,{label:"MD5"},{default:l(()=>[t(y,{modelValue:s.md5,"onUpdate:modelValue":a[4]||(a[4]=e=>s.md5=e),onKeyup:z(n,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u952E\u503C",onClear:n,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),t(f,{label:"\u7FFB\u8BD1\u5185\u5BB9"},{default:l(()=>[t(y,{modelValue:s.tl_content,"onUpdate:modelValue":a[5]||(a[5]=e=>s.tl_content=e),onKeyup:z(n,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u7FFB\u8BD1\u5185\u5BB9",onClear:n,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),t(f,null,{default:l(()=>[t(C,{type:"primary",onClick:n},{default:l(()=>[g("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1}),N((d(),m(O,{data:o.list,stripe:"",border:""},{default:l(()=>[t(r,{prop:"id",label:"id",width:"80","show-overflow-tooltip":!0}),t(r,{label:"\u72B6\u6001",width:"80","show-overflow-tooltip":!0},{default:l(e=>[e.row.status==0?(d(),_("span",oe,"\u7FFB\u8BD1\u5931\u8D25")):e.row.status==1?(d(),_("span",ne,"\u7FFB\u8BD1\u6210\u529F")):(d(),_("span",se,"\u5F02\u5E38"))]),_:1}),t(r,{label:"\u7C7B\u578B",width:"80","show-overflow-tooltip":!0},{default:l(e=>[e.row.type==0?(d(),_("span",de,"\u6587\u5B57")):e.row.type==1?(d(),_("span",re,"\u5BCC\u6587\u672C")):e.row.type==2?(d(),_("span",ue,"\u56FE\u7247")):(d(),_("span",ie,"\u5F02\u5E38"))]),_:1}),t(r,{label:"MD5",width:"120","show-overflow-tooltip":!0},{default:l(e=>[D("span",{onClick:x=>c(e.row.md5),class:"g-purple g-pointer"},v(e.row.md5),9,pe)]),_:1}),t(r,{label:"\u539F\u6587","min-width":"80","show-overflow-tooltip":!0},{default:l(e=>[e.row.type==2?(d(),m(M,{key:0,style:{"max-width":"100px"},onClick:x=>T(b).setTranslate({content:e.row.translate.content,type:2}),src:e.row.translate.content,"preview-src-list":[e.row.translate.content],fit:"contain","hide-on-click-modal":"","preview-teleported":""},null,8,["onClick","src","preview-src-list"])):(d(),_("div",{key:1,onClick:x=>T(b).setTranslate({content:e.row.translate.content})},v(e.row.translate.content),9,ce))]),_:1}),t(r,{prop:"tl",label:"\u7FFB\u8BD1\u8BED\u8A00",width:"80","show-overflow-tooltip":!0}),t(r,{prop:"tl_content",label:"\u7FFB\u8BD1\u5185\u5BB9","min-width":"160","show-overflow-tooltip":!0},{default:l(e=>[e.row.type==2?(d(),m(M,{key:0,style:{"max-width":"100px"},src:e.row.tl_content,"preview-src-list":[e.row.tl_content],fit:"contain","hide-on-click-modal":"","preview-teleported":""},null,8,["src","preview-src-list"])):(d(),_("div",_e,v(e.row.tl_content),1))]),_:1}),t(r,{prop:"err_nums",label:"\u7FFB\u8BD1\u5931\u8D25",width:"80","show-overflow-tooltip":!0}),t(r,{label:"\u64CD\u4F5C",width:"140",fixed:"right"},{default:l(e=>[t(C,{type:"primary",onClick:x=>w(e.row)},{default:l(()=>[g("\u7F16\u8F91")]),_:2},1032,["onClick"]),t(C,{type:"danger",onClick:x=>U(e.row)},{default:l(()=>[g("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,o.loading]]),t(F,{"page-sizes":[15,30,60,100],total:o.total,"page-size":s.limit,"onUpdate:page-size":a[6]||(a[6]=e=>s.limit=e),"current-page":s.page,"onUpdate:current-page":a[7]||(a[7]=e=>s.page=e),onCurrentChange:a[8]||(a[8]=e=>n(!1)),onSizeChange:a[9]||(a[9]=e=>n(!1)),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"]),t(le,{onSuccess:a[10]||(a[10]=e=>n(!1)),modelValue:k.value,"onUpdate:modelValue":a[11]||(a[11]=e=>k.value=e),data:o.row},null,8,["modelValue","data"])]),_:1})}}};export{fe as default};
