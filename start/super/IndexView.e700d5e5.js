import{b as D,M as T,r as E,c as d,d as F,o as w,k,h as l,g as e,m as x,w as I,R as h,i as j,O as L,n as N,E as K,G as y,f as U,j as A,e as M,l as G,Q}from"./index.088b396a.js";import{f as O}from"./index.969b688d.js";const H={__name:"AddView",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","success"],setup(S,{emit:V}){const i=S,f=D(),g=D(!1),a=T({get:()=>i.modelValue,set:t=>{V("update:modelValue",t)}}),u=E({title:"",icon:"",day:"",min_rate:"",max_rate:"",bc_rate:"0",min:"1",max:"-1",sort:"0"}),z=async()=>{f.value.resetFields()},b=async()=>{if(g.value)return;g.value=!0;const{success:t,data:o}=await N.addMining(u);g.value=!1,t&&(V("success"),K.success(o.msg),a.value=!1)};return(t,o)=>{const m=d("el-input"),p=d("el-form-item"),_=d("el-col"),v=d("el-row"),$=d("el-form"),c=d("el-button"),C=d("el-dialog"),B=F("loading");return w(),k(C,{modelValue:j(a),"onUpdate:modelValue":o[11]||(o[11]=s=>L(a)?a.value=s:null),title:"\u65B0\u589E",onClose:z,draggable:"","close-on-click-modal":!1,width:"680px"},{footer:l(()=>[e(c,{size:"default",onClick:o[10]||(o[10]=s=>a.value=!1)},{default:l(()=>[x("\u53D6 \u6D88")]),_:1}),e(c,{size:"default",type:"primary",onClick:b},{default:l(()=>[x("\u786E \u8BA4")]),_:1})]),default:l(()=>[I((w(),k($,{size:"default",ref_key:"refForm",ref:f,model:u,"label-width":"90px"},{default:l(()=>[e(v,{gutter:24},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(p,{label:"\u6807\u9898",prop:"title"},{default:l(()=>[e(m,{modelValue:u.title,"onUpdate:modelValue":o[0]||(o[0]=s=>u.title=s),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(p,{label:"\u56FE\u6807",prop:"icon"},{default:l(()=>[e(h,{width:"80px",height:"80px",modelValue:u.icon,"onUpdate:modelValue":o[1]||(o[1]=s=>u.icon=s)},null,8,["modelValue"]),e(m,{modelValue:u.icon,"onUpdate:modelValue":o[2]||(o[2]=s=>u.icon=s)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(p,{label:"\u5468\u671F(\u5929)",prop:"day"},{default:l(()=>[e(m,{modelValue:u.day,"onUpdate:modelValue":o[3]||(o[3]=s=>u.day=s),placeholder:"\u8BF7\u8F93\u5165\u6536\u76CA\u5468\u671F",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(p,{label:"\u8FDD\u7EA6\u6BD4\u4F8B",prop:"bc_rate"},{default:l(()=>[e(m,{modelValue:u.bc_rate,"onUpdate:modelValue":o[4]||(o[4]=s=>u.bc_rate=s),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(p,{label:"\u6700\u5C0F\u6536\u76CA",prop:"min_rate"},{default:l(()=>[e(m,{modelValue:u.min_rate,"onUpdate:modelValue":o[5]||(o[5]=s=>u.min_rate=s),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(p,{label:"\u6700\u5927\u6536\u76CA",prop:"max_rate"},{default:l(()=>[e(m,{modelValue:u.max_rate,"onUpdate:modelValue":o[6]||(o[6]=s=>u.max_rate=s),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{gutter:24},{default:l(()=>[e(_,{span:12},{default:l(()=>[e(p,{label:"\u6700\u4F4E\u8D2D\u5165",prop:"min"},{default:l(()=>[e(m,{modelValue:u.min,"onUpdate:modelValue":o[7]||(o[7]=s=>u.min=s),placeholder:"\u8BF7\u8F93\u5165\u5355\u7B14\u6700\u4F4E\u8D2D\u5165\u91D1\u989D",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(_,{span:12},{default:l(()=>[e(p,{label:"\u6700\u9AD8\u8D2D\u5165",prop:"max"},{default:l(()=>[e(m,{modelValue:u.max,"onUpdate:modelValue":o[8]||(o[8]=s=>u.max=s),placeholder:"\u8BF7\u8F93\u5165\u5355\u7B14\u6700\u4F4E\u6700\u9AD8\u8D2D\u5165",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,{label:"\u6392\u5E8F",prop:"sort"},{default:l(()=>[e(m,{modelValue:u.sort,"onUpdate:modelValue":o[9]||(o[9]=s=>u.sort=s),placeholder:"\u6392\u5E8F,\u503C\u8D8A\u5927\u6392\u8D8A\u524D",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[B,g.value]])]),_:1},8,["modelValue"])}}},J={__name:"EditView",props:{modelValue:{type:Boolean,default:!1},data:{type:Object}},emits:["update:modelValue","success"],setup(S,{emit:V}){const i=S,f=D(!1),g=T({get:()=>i.modelValue,set:b=>{V("update:modelValue",b)}}),a=E({id:0,title:"",icon:"",day:"",min_rate:"",max_rate:"",bc_rate:"0",min:"",max:"",sort:"0",status:1}),u=()=>{a.id=i.data.id,a.title=i.data.title,a.icon=i.data.icon,a.day=i.data.day,a.min_rate=i.data.min_rate,a.max_rate=i.data.max_rate,a.bc_rate=i.data.bc_rate,a.min=i.data.min,a.max=i.data.max,a.sort=i.data.sort,a.status=i.data.status},z=async()=>{if(f.value)return;f.value=!0;const{success:b,data:t}=await N.editMining(a);f.value=!1,b&&(V("success"),K.success(t.msg),g.value=!1)};return(b,t)=>{const o=d("el-form-item"),m=d("el-input"),p=d("el-col"),_=d("el-row"),v=d("el-option"),$=d("el-select"),c=d("el-form"),C=d("el-button"),B=d("el-dialog"),s=F("loading");return w(),k(B,{modelValue:j(g),"onUpdate:modelValue":t[12]||(t[12]=r=>L(g)?g.value=r:null),title:"\u7F16\u8F91",onOpen:u,draggable:"","close-on-click-modal":!1,width:"680px"},{footer:l(()=>[e(C,{size:"default",onClick:t[11]||(t[11]=r=>g.value=!1)},{default:l(()=>[x("\u53D6 \u6D88")]),_:1}),e(C,{size:"default",type:"primary",onClick:z},{default:l(()=>[x("\u786E \u8BA4")]),_:1})]),default:l(()=>[I((w(),k(c,{size:"default",model:a,"label-width":"90px"},{default:l(()=>[e(o,{label:"ID",prop:"id"},{default:l(()=>[x(y(a.id),1)]),_:1}),e(_,{gutter:24},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"\u6807\u9898",prop:"title"},{default:l(()=>[e(m,{modelValue:a.title,"onUpdate:modelValue":t[0]||(t[0]=r=>a.title=r),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"\u56FE\u6807",prop:"icon"},{default:l(()=>[e(h,{width:"80px",height:"80px",modelValue:a.icon,"onUpdate:modelValue":t[1]||(t[1]=r=>a.icon=r)},null,8,["modelValue"]),e(m,{modelValue:a.icon,"onUpdate:modelValue":t[2]||(t[2]=r=>a.icon=r)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:24},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"\u5468\u671F(\u5929)",prop:"day"},{default:l(()=>[e(m,{modelValue:a.day,"onUpdate:modelValue":t[3]||(t[3]=r=>a.day=r),placeholder:"\u8BF7\u8F93\u5165\u6536\u76CA\u5468\u671F",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"\u8FDD\u7EA6\u6BD4\u4F8B",prop:"bc_rate"},{default:l(()=>[e(m,{modelValue:a.bc_rate,"onUpdate:modelValue":t[4]||(t[4]=r=>a.bc_rate=r),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:24},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"\u6700\u5C0F\u6536\u76CA",prop:"min_rate"},{default:l(()=>[e(m,{modelValue:a.min_rate,"onUpdate:modelValue":t[5]||(t[5]=r=>a.min_rate=r),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"\u6700\u5927\u6536\u76CA",prop:"max_rate"},{default:l(()=>[e(m,{modelValue:a.max_rate,"onUpdate:modelValue":t[6]||(t[6]=r=>a.max_rate=r),placeholder:"0.01-\u4E3A1%,\u6700\u5C0F4\u4F4D\u5C0F\u6570",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:24},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"\u6700\u4F4E\u8D2D\u5165",prop:"min"},{default:l(()=>[e(m,{modelValue:a.min,"onUpdate:modelValue":t[7]||(t[7]=r=>a.min=r),placeholder:"\u8BF7\u8F93\u5165\u5355\u7B14\u6700\u4F4E\u8D2D\u5165\u91D1\u989D",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"\u6700\u9AD8\u8D2D\u5165",prop:"max"},{default:l(()=>[e(m,{modelValue:a.max,"onUpdate:modelValue":t[8]||(t[8]=r=>a.max=r),placeholder:"\u8BF7\u8F93\u5165\u5355\u7B14\u6700\u4F4E\u6700\u9AD8\u8D2D\u5165",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(_,{gutter:24},{default:l(()=>[e(p,{span:12},{default:l(()=>[e(o,{label:"\u6392\u5E8F",prop:"sort"},{default:l(()=>[e(m,{modelValue:a.sort,"onUpdate:modelValue":t[9]||(t[9]=r=>a.sort=r),placeholder:"\u6392\u5E8F,\u503C\u8D8A\u5927\u6392\u8D8A\u524D",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:l(()=>[e(o,{label:"\u72B6\u6001",prop:"status"},{default:l(()=>[e($,{disabled:"",modelValue:a.status,"onUpdate:modelValue":t[10]||(t[10]=r=>a.status=r)},{default:l(()=>[e(v,{label:"\u6B63\u5E38",value:1}),e(v,{label:"\u7981\u7528",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[s,f.value]])]),_:1},8,["modelValue"])}}},P={class:"g-flex"},W=U("span",null,"\u9501\u4ED3\u6316\u77FF",-1),X={class:"g-flex-justify-end g-flex-1"},Y={key:0,class:"g-green"},Z={key:1,class:"g-red"},ee={key:2,class:"g-red"},le={key:0},te={key:1},ne={__name:"IndexView",setup(S){const V=E({loading:!1,total:0,list:[],row:{}}),i=E({title:"",status:"",page:1,limit:15}),f=async(b=!0)=>{b&&(i.page=1),V.loading=!0;const{success:t,data:o}=await N.getMiningList(i);V.loading=!1,t&&(V.list=o.list,V.total=o.total)};f();const g=D(!1),a=D(!1),u=b=>{V.row=b,a.value=!0},z=b=>{Q.confirm("\u786E\u8BA4\u5220\u9664\u6570\u636E?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(async()=>{V.loading=!0;const{success:t,data:o}=await N.delMining({id:b.id});V.loading=!1,t&&(K.success(o.msg),await f(!1))})};return(b,t)=>{const o=d("el-button"),m=d("el-option"),p=d("el-select"),_=d("el-form-item"),v=d("el-input"),$=d("el-form"),c=d("el-table-column"),C=d("el-image"),B=d("el-table"),s=d("el-pagination"),r=d("el-card"),R=F("loading");return w(),k(r,null,{header:l(()=>[U("div",P,[W,U("div",X,[e(o,{type:"success",onClick:t[0]||(t[0]=n=>g.value=!0)},{default:l(()=>[x("\u65B0\u589E")]),_:1})])])]),default:l(()=>[e($,{inline:!0},{default:l(()=>[e(_,{label:"\u72B6\u6001"},{default:l(()=>[e(p,{modelValue:i.status,"onUpdate:modelValue":t[1]||(t[1]=n=>i.status=n),onChange:f},{default:l(()=>[e(m,{label:"\u5168\u90E8",value:""}),e(m,{label:"\u6B63\u5E38",value:"1"}),e(m,{label:"\u7981\u7528",value:"0"})]),_:1},8,["modelValue"])]),_:1}),e(_,{label:"\u6807\u9898"},{default:l(()=>[e(v,{modelValue:i.title,"onUpdate:modelValue":t[2]||(t[2]=n=>i.title=n),onKeyup:A(f,["enter"]),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",onClear:f,clearable:""},null,8,["modelValue","onKeyup"])]),_:1}),e(_,null,{default:l(()=>[e(o,{type:"primary",onClick:f},{default:l(()=>[x("\u67E5\u8BE2")]),_:1})]),_:1})]),_:1}),I((w(),k(B,{data:V.list,stripe:"",border:""},{default:l(()=>[e(c,{prop:"id",label:"ID","min-width":"50"}),e(c,{prop:"title",label:"\u6807\u9898","min-width":"100"}),e(c,{label:"\u72B6\u6001",width:"80"},{default:l(n=>[n.row.status===1?(w(),M("span",Y,"\u6B63\u5E38")):n.row.status===0?(w(),M("span",Z,"\u7981\u7528")):(w(),M("span",ee,"\u5F02\u5E38"))]),_:1}),e(c,{label:"\u56FE\u6807",width:"80"},{default:l(n=>[n.row.icon?(w(),k(C,{key:0,src:n.row.icon,"preview-src-list":[n.row.icon],fit:"contain","hide-on-click-modal":"","preview-teleported":""},null,8,["src","preview-src-list"])):G("",!0)]),_:1}),e(c,{prop:"day",label:"\u5468\u671F",width:"80","show-overflow-tooltip":!0}),e(c,{label:"\u65E5\u6536\u76CA","min-width":"120","show-overflow-tooltip":!0},{default:l(n=>[U("span",null,y(n.row.min_rate*100)+"-"+y(n.row.max_rate*100)+"%",1)]),_:1}),e(c,{label:"\u8FDD\u7EA6\u6BD4\u4F8B",width:"80","show-overflow-tooltip":!0},{default:l(n=>[U("span",null,y(n.row.bc_rate*100)+"%",1)]),_:1}),e(c,{prop:"min",label:"\u6700\u5C0F",width:"60","show-overflow-tooltip":!0}),e(c,{prop:"max",label:"\u6700\u5927",width:"60","show-overflow-tooltip":!0},{default:l(n=>[n.row.max==-1?(w(),M("span",le,"\u4E0D\u9650\u5236")):(w(),M("span",te,y(n.row.max),1))]),_:1}),e(c,{prop:"sort",label:"\u6392\u5E8F",width:"80","show-overflow-tooltip":!0}),e(c,{label:"\u521B\u5EFA\u65F6\u95F4",width:"130"},{default:l(n=>[U("span",null,y(j(O)(n.row.create_time)),1)]),_:1}),e(c,{label:"\u66F4\u65B0\u65F6\u95F4",width:"130"},{default:l(n=>[U("span",null,y(j(O)(n.row.modify_time)),1)]),_:1}),e(c,{label:"\u64CD\u4F5C",width:"130",fixed:"right"},{default:l(n=>[e(o,{type:"primary",onClick:q=>u(n.row)},{default:l(()=>[x("\u7F16\u8F91")]),_:2},1032,["onClick"]),e(o,{type:"danger",onClick:q=>z(n.row)},{default:l(()=>[x("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[R,V.loading]]),e(s,{"page-sizes":[15,30,60,100],total:V.total,"page-size":i.limit,"onUpdate:page-size":t[3]||(t[3]=n=>i.limit=n),"current-page":i.page,"onUpdate:current-page":t[4]||(t[4]=n=>i.page=n),onCurrentChange:t[5]||(t[5]=n=>f(!1)),onSizeChange:t[6]||(t[6]=n=>f(!1)),background:"",small:"",layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","page-size","current-page"]),e(H,{onSuccess:f,modelValue:g.value,"onUpdate:modelValue":t[7]||(t[7]=n=>g.value=n)},null,8,["modelValue"]),e(J,{onSuccess:t[8]||(t[8]=n=>f(!1)),modelValue:a.value,"onUpdate:modelValue":t[9]||(t[9]=n=>a.value=n),data:V.row},null,8,["modelValue","data"])]),_:1})}}};export{ne as default};
