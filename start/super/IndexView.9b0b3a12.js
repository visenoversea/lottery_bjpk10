import{u as F,A,B as H,x as L,a as O,c as o,o as a,k as d,h as s,f as x,g as l,w as G,C as W,i as _,e as B,F as $,D,l as z,G as b,b as R,r as I,d as X,m as k,E as U,n as j,H as Y,I as Z,J as ee,K as se,T as le,L as te}from"./index.359dadce.js";const oe={class:"s-logo g-flex-align-center g-flex-justify-center"},ae={class:"s-logo-title"},ne={__name:"SlideBar",props:{isCollapse:Boolean},setup(V){const p=V,h=F(),{menuList:y}=A(h),{isCollapse:u}=H(p),i=L(),n=O(),v=async g=>{const t=await n.push(g);t&&t.to.name===t.from.name&&await n.push("/Refresh")};return(g,t)=>{const r=o("el-avatar"),f=o("el-image"),m=o("el-menu-item"),P=o("el-sub-menu"),C=o("el-menu"),w=o("el-scrollbar"),c=o("el-aside");return a(),d(c,{class:"s_layout_sidebar g-flex-column",width:_(u)?"60px":"200px"},{default:s(()=>[x("div",oe,[l(r,{shape:"square",size:24,fit:"contain",src:"/img/logo.png"}),G(x("div",ae,"\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF",512),[[W,!_(u)]])]),l(w,null,{default:s(()=>[l(C,{class:"s-menu",mode:"vertical","default-active":_(i).path,onSelect:v,collapse:_(u)},{default:s(()=>[(a(!0),B($,null,D(_(y),e=>(a(),B($,{key:e.id},[e.children.length>1?(a(),d(P,{key:0,index:e.path},{title:s(()=>[e.icon?(a(),d(f,{key:0,src:e.icon,fit:"contain"},null,8,["src"])):z("",!0),x("span",null,b(e.title),1)]),default:s(()=>[(a(!0),B($,null,D(e.children,S=>(a(),d(m,{key:S.id,index:e.path+"/"+S.path},{default:s(()=>[x("span",null,b(S.title),1)]),_:2},1032,["index"]))),128))]),_:2},1032,["index"])):e.children.length===1?(a(),d(m,{key:1,index:e.path+"/"+e.children[0].path},{default:s(()=>[e.icon?(a(),d(f,{key:0,src:e.icon,fit:"contain"},null,8,["src"])):z("",!0),x("span",null,b(e.children[0].title),1)]),_:2},1032,["index"])):(a(),d(m,{key:2,index:e.path},{default:s(()=>[e.icon?(a(),d(f,{key:0,src:e.icon,fit:"contain"},null,8,["src"])):z("",!0),x("span",null,b(e.title),1)]),_:2},1032,["index"]))],64))),128))]),_:1},8,["default-active","collapse"])]),_:1})]),_:1},8,["width"])}}},re={__name:"EditPassword",setup(V,{expose:p}){const h=F(),y=R(),u=R(!1),i=R(!1);p({onShow(){u.value=!0}});const n=I({oldPassword:"",password:"",password2:"",authCode:""}),v=async()=>{y.value.resetFields()},g=async()=>{if(n.password!==n.password2){U.error("\u65B0\u5BC6\u7801\u4E24\u6B21\u5BC6\u7801\u4E0D\u4E00\u81F4");return}if(i.value)return;i.value=!0;const{success:t,data:r}=await j.editPassword(n);i.value=!1,t&&(U.success(r.msg),u.value=!1,h.signOut())};return(t,r)=>{const f=o("el-input"),m=o("el-form-item"),P=o("el-form"),C=o("el-button"),w=o("el-dialog"),c=X("loading");return a(),d(w,{modelValue:u.value,"onUpdate:modelValue":r[5]||(r[5]=e=>u.value=e),title:"\u4FEE\u6539\u5BC6\u7801",onClose:v,draggable:"","close-on-click-modal":!1,width:"420px"},{footer:s(()=>[l(C,{size:"default",onClick:r[4]||(r[4]=e=>u.value=!1)},{default:s(()=>[k("\u53D6 \u6D88")]),_:1}),l(C,{size:"default",type:"primary",onClick:g},{default:s(()=>[k("\u786E \u8BA4")]),_:1})]),default:s(()=>[G((a(),d(P,{size:"default",ref_key:"refForm",ref:y,model:n,"label-width":"90px"},{default:s(()=>[l(m,{label:"\u65E7\u5BC6\u7801",prop:"oldPassword"},{default:s(()=>[l(f,{"show-password":"",type:"password",modelValue:n.oldPassword,"onUpdate:modelValue":r[0]||(r[0]=e=>n.oldPassword=e)},null,8,["modelValue"])]),_:1}),l(m,{label:"\u65B0\u5BC6\u7801",prop:"password"},{default:s(()=>[l(f,{"show-password":"",type:"password",modelValue:n.password,"onUpdate:modelValue":r[1]||(r[1]=e=>n.password=e)},null,8,["modelValue"])]),_:1}),l(m,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password2"},{default:s(()=>[l(f,{"show-password":"",type:"password",modelValue:n.password2,"onUpdate:modelValue":r[2]||(r[2]=e=>n.password2=e)},null,8,["modelValue"])]),_:1}),_(h).system.GoogleAuth==1?(a(),d(m,{key:0,label:"\u8C37\u6B4C\u9A8C\u8BC1\u7801",prop:"authCode"},{default:s(()=>[l(f,{modelValue:n.authCode,"onUpdate:modelValue":r[3]||(r[3]=e=>n.authCode=e),type:"text",placeholder:"\u8BF7\u8F93\u5165\u8C37\u6B4C\u9A8C\u8BC1\u7801"},null,8,["modelValue"])]),_:1})):z("",!0)]),_:1},8,["model"])),[[c,i.value]])]),_:1},8,["modelValue"])}}};const de={class:"s-dropdown"},ue={class:"s-user-type"},ie={__name:"HeaderView",props:{isCollapse:Boolean},emits:["collapse"],setup(V,{emit:p}){const h=V,y=O(),u=L(),i=F(),{user:n}=A(i),v=R(),{isCollapse:g}=H(h),t=I({index:0,list:[]}),r=()=>{if(u.path==="/Refresh")return;t.list.some((c,e)=>c.path===u.fullPath?(t.index=e,!0):!1)||(t.index=t.list.length,t.list.push({title:u.meta.title,path:u.fullPath}))},f=w=>{if(t.list.length<2){U.error("\u65E0\u6CD5\u5173\u95ED\u6700\u540E\u4E00\u4E2ATab");return}t.list.splice(w,1),t.index===w&&(t.list[t.index]||(t.index=t.index-1),y.push(t.list[t.index].path))},m=async()=>{await y.push(t.list[t.index].path)};Y(u,()=>{r()},{immediate:!0});const P=async()=>{const{success:w,data:c}=await j.clearSystemCache();!w||U.success(c.msg)},C=async()=>{i.signOut()};return(w,c)=>{const e=o("el-icon"),S=o("el-tab-pane"),q=o("el-tabs"),J=o("el-avatar"),E=o("el-dropdown-item"),K=o("el-dropdown-menu"),M=o("el-dropdown"),Q=o("el-header");return a(),B($,null,[l(Q,{class:"s_header g-flex-align-center"},{default:s(()=>[l(e,{class:"g-pointer",onClick:c[0]||(c[0]=T=>p("collapse")),size:25},{default:s(()=>[_(g)?(a(),d(_(Z),{key:0})):(a(),d(_(ee),{key:1}))]),_:1}),l(q,{class:"s-tabs",type:"card",modelValue:t.index,"onUpdate:modelValue":c[1]||(c[1]=T=>t.index=T),closable:"",onTabChange:m,onTabRemove:f},{default:s(()=>[(a(!0),B($,null,D(t.list,(T,N)=>(a(),d(S,{key:N,label:T.title,name:N},null,8,["label","name"]))),128))]),_:1},8,["modelValue"]),l(M,{size:"default",class:"s-user","hide-on-click":!1},{dropdown:s(()=>[l(K,null,{default:s(()=>[l(E,null,{default:s(()=>[k("\u8D26\u53F7 : "+b(_(i).user.user_name),1)]),_:1}),l(E,{onClick:c[2]||(c[2]=T=>v.value.onShow())},{default:s(()=>[k("\u4FEE\u6539\u5BC6\u7801")]),_:1}),_(i).user.type>10?(a(),d(E,{key:0,onClick:P},{default:s(()=>[k("\u6E05\u9664\u7F13\u5B58")]),_:1})):z("",!0),l(E,{onClick:C,divided:""},{default:s(()=>[k("\u9000\u51FA\u767B\u5F55")]),_:1})]),_:1})]),default:s(()=>[x("div",de,[l(J,{size:24,fit:"contain",src:_(n).avatar},null,8,["src"]),x("span",ue,b(_(i).user.type>=10?"\u8D85\u7EA7\u7BA1\u7406\u5458":"\u4EE3\u7406"),1),l(e,{class:"el-icon--right"},{default:s(()=>[l(_(se))]),_:1})])]),_:1})]),_:1}),l(re,{ref_key:"refEditPassword",ref:v},null,512)],64)}}};const _e={__name:"IndexView",setup(V){const p=R(!1),h=()=>{p.value=!p.value};return(y,u)=>{const i=o("router-view"),n=o("el-main"),v=o("el-container");return a(),d(v,{class:"v_layout"},{default:s(()=>[l(ne,{isCollapse:p.value},null,8,["isCollapse"]),l(v,{direction:"vertical"},{default:s(()=>[l(ie,{onCollapse:h,isCollapse:p.value},null,8,["isCollapse"]),l(n,{class:"v-main"},{default:s(()=>[l(i,null,{default:s(({Component:g})=>[l(le,{name:"g-fade",mode:"out-in"},{default:s(()=>[(a(),d(te(g)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1})}}};export{_e as default};
