import{f as N,E as O,s as $,u as j,c as h,F as k,g as c,al as A,o as E,a as L,b as e,t as n,d as t,p as r,v as I,am as v,e as D,ao as R,W as q,aq as S,Q as p,aN as F,I as Q}from"./main.eeabd2a7.js";const W={class:"v_bind_mobile n-bg"},z={class:"new-head"},J=e("img",{src:Q,alt:""},null,-1),K=[J],X={class:"new-head_title_text"},Y={class:"v-bind-mobile-container"},Z={class:"v-form"},ee={class:"v-form-item-box"},te={class:"v-form-item-box-title"},oe={class:"v-form-item g-flex-align-center"},se={class:"v-form-item-left-text"},ie=e("i",{class:"iconfont icon-right-1-copy"},null,-1),le={class:"v-form-item-middle-input"},ae=["placeholder"],ne={class:"v-form-item-box"},de={class:"v-form-item-box-title"},ce={class:"v-form-item g-flex-align-center"},re={class:"v-form-item-middle-input"},me=["placeholder"],ue={class:"v-form-item-middle-right-text"},_e={class:"v-form-item-box"},ve={class:"v-form-item-box-title"},fe={class:"v-form-item g-flex-align-center"},he={class:"v-form-item-left-text"},pe=e("i",{class:"iconfont icon-right-1-copy"},null,-1),be={class:"v-form-item-middle-input"},xe=["placeholder"],ge={class:"v-form-item-box"},Ce={class:"v-form-item-box-title"},Te={class:"v-form-item g-flex-align-center"},ye={class:"v-form-item-middle-input"},we=["placeholder"],ke={class:"v-form-item-middle-right-text"},Be={__name:"BindMobile",setup(Ie){let B=N();O();const m=$(),b=j(),a=h(()=>b.tm("bindMobile")),f=h(()=>b.tm("gongyong"));let i=k({area_code:"",mobile:"",code:"",oldCode:""}),x=k({list:[]}),g=c(f.value.sendCodeText),C=c(f.value.againSendCodeText),T=c(f.value.sendCodeText),u=c(0),_=c(0);const y=c(null);M();async function M(){const{success:l,data:o}=await A();!l||(x.list=o.list,i.area_code=o.list[0].area_code)}let d=h(()=>m.userInfo);async function P(){const{success:l,data:o}=await q();!l||(m.setUserInfo(o.info),console.log(o))}P();function w(){y.value.onShow()}function U(l){i.area_code=l.area_code}async function V(){if(_.value)return;m.loadingShow=!0;const{success:l,data:o}=await S({area_code:d.value.area_code,mobile:d.value.mobile});if(!l)return;let s=60;p(o.msg),_.value=setInterval(()=>{s--,g.value=s===0?C.value:s+"s",s===0&&(clearInterval(_.value),_.value=0)},1e3)}async function G(){if(u.value)return;m.loadingShow=!0;const{success:l,data:o}=await S({area_code:i.area_code,mobile:i.mobile});if(!l)return;let s=60;p(o.msg),u.value=setInterval(()=>{s--,T.value=s===0?C.value:s+"s",s===0&&(clearInterval(u.value),u.value=0)},1e3)}async function H(){m.loadingShow=!0,console.log(i);const{success:l,data:o}=await F(i);!l||(p.success(o.msg),setTimeout(()=>{B.back(-1)},500))}return(l,o)=>(E(),L("div",W,[e("div",z,[e("div",{onClick:o[0]||(o[0]=s=>l.$router.go(-1)),class:"new-head-back"},K)]),e("div",X,n(t(a).titleText),1),e("div",Y,[e("div",Z,[r(e("div",ee,[e("div",te,[e("span",null,n(t(a).oldMobileText),1)]),e("div",oe,[e("div",{onClick:w,class:"v-form-item-left g-flex-align-center"},[e("span",se,"+"+n(t(d).area_code),1),ie]),e("div",le,[r(e("input",{type:"text",readonly:"","onUpdate:modelValue":o[1]||(o[1]=s=>t(d).mobile=s),placeholder:t(a).mobilePlaceholderText},null,8,ae),[[v,t(d).mobile]])])])],512),[[I,t(d).mobile]]),r(e("div",ne,[e("div",de,[e("span",null,n(t(a).codeText),1)]),e("div",ce,[e("div",re,[r(e("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=s=>t(i).oldCode=s),label:"","label-width":"0",placeholder:t(a).codePlaceholderText},null,8,me),[[v,t(i).oldCode]])]),e("div",{onClick:V,class:"v-form-item-middle-right g-flex-align-center"},[e("span",ue,n(t(g)),1)])])],512),[[I,t(d).mobile]]),e("div",_e,[e("div",ve,[e("span",null,n(t(a).mobileText),1)]),e("div",fe,[e("div",{onClick:w,class:"v-form-item-left g-flex-align-center"},[e("span",he,"+"+n(t(i).area_code),1),pe]),e("div",be,[r(e("input",{type:"text","onUpdate:modelValue":o[3]||(o[3]=s=>t(i).mobile=s),placeholder:t(a).mobilePlaceholderText},null,8,xe),[[v,t(i).mobile]])])])]),e("div",ge,[e("div",Ce,[e("span",null,n(t(a).codeText),1)]),e("div",Te,[e("div",ye,[r(e("input",{type:"text","onUpdate:modelValue":o[4]||(o[4]=s=>t(i).code=s),label:"","label-width":"0",placeholder:t(a).codePlaceholderText},null,8,we),[[v,t(i).code]])]),e("div",{onClick:G,class:"v-form-item-middle-right g-flex-align-center"},[e("span",ke,n(t(T)),1)])])])]),e("div",{onClick:H,class:"v-submit-btn g-flex-align-center g-flex-justify-center"},n(t(a).submitBtnText),1)]),D(R,{list:t(x).list,onEmitPhoneItemClick:U,ref_key:"refBindPhonesPop",ref:y},null,8,["list"])]))}};export{Be as default};
