import{s as V,u as G,c as k,r as p,a as U,b,o as l,d as r,e as w,w as C,f as e,t as c,g as t,F as S,h as P,i as B,j as T,n as q,v as j,k as z,l as F,m as M,p as K,q as W,x as A,y as E,z as J,A as Q,B as X}from"./index.de11b688.js";const Y=""+new URL("../img/icon/ico-notice.png",import.meta.url).href;const Z={class:"c_notice_pop"},ee={class:"c-pop-container g-flex-column g-flex-align-center"},te={class:"c-pop-title"},se={class:"c-pop-title-text"},ne={class:"c-pop-content"},oe={class:"c-pop-content-list"},ie={class:"c-pop-item-title g-flex-align-center"},ae={class:"c-pop-item-title-nums g-flex-align-center g-flex-justify-center"},le={class:"c-pop-item-title-text"},ce={class:"c-pop-item-content-text"},re=e("i",{class:"iconfont icon-guanbi2"},null,-1),pe=[re],ue={__name:"NoticePop",setup(I,{expose:g}){V();const s=G(),x=k(()=>s.tm("noticePop"));let i=p(!1);function u(a){d.list=a,i.value=!0}let d=U({list:[]});function y(){i.value=!1}return g({onShow:u}),(a,v)=>{const m=b("van-popup");return l(),r("div",Z,[w(m,{"safe-area-inset-bottom":"",class:"c-pop",show:t(i),"onUpdate:show":v[0]||(v[0]=_=>B(i)?i.value=_:i=_),position:"center"},{default:C(()=>[e("div",ee,[e("div",te,[e("div",se,[e("span",null,c(t(x).titleText),1)])]),e("div",ne,[e("div",oe,[(l(!0),r(S,null,P(t(d).list,(_,f)=>(l(),r("div",{class:"c-pop-content-item",key:f},[e("div",ie,[e("div",ae,c(f+1),1),e("div",le,c(_.title),1)]),e("div",ce,[e("span",null,c(_.des),1)])]))),128))])]),e("div",{class:"c-pop-close",onClick:y},pe)])]),_:1},8,["show"])])}}};const de={class:"c_update_pop"},_e={class:"c-pop-head"},ve={class:"c-pop-head-title"},fe={class:"c-pop-head-version"},ge={class:"c-pop-content"},me={class:"c-pop-content-title"},he={class:"c-pop-content-tips-list"},we={class:"c-pop-content-tips-item"},xe={class:"c-pop-content-line"},ye={__name:"UpdatePop",setup(I,{expose:g}){const s=V(),x=G(),i=k(()=>x.tm("updatePop"));let u=p(!1),d=p(0);function y(){u.value=!0}let a=p(!1),v=p(0);function m(){a.value=!0,v.value=setInterval(()=>{if(d.value>=100){clearInterval(v.value),window.location.reload();return}d.value+=25},150)}return g({onShow:y}),(_,f)=>{const L=b("van-popup");return l(),r("div",de,[w(L,{"close-on-click-overlay":!1,class:"c-pop",show:t(u),"onUpdate:show":f[0]||(f[0]=N=>B(u)?u.value=N:u=N),position:"center"},{default:C(()=>[e("div",_e,[e("div",ve,c(t(i).titleText),1),e("div",fe," V."+c(t(s).system.system)+" "+c(t(i).wendingText),1)]),e("div",ge,[e("div",me,c(t(i).updateContentText)+"\uFF1A",1),e("div",he,[e("div",we,"1."+c(t(i).contentOneText),1)]),T(e("div",xe,[e("div",{style:q({width:`${t(d)}%`}),class:"c-pop-content-progress"},null,4)],512),[[j,t(a)]]),T(e("div",{onClick:m,class:"c-pop-btn g-flex-align-center g-flex-justify-center"},c(t(i).updateText),513),[[j,!t(a)]])])]),_:1},8,["show"])])}}};const $e={class:"v_main g-flex-column"},ke=e("div",{class:"v-main-head g-flex-align-center"},[e("div",{class:"v-main-head-middle g-flex-justify-center g-flex-align-center"},[e("span",null,"\u9996\u9875")])],-1),be={class:"v-main-container"},Ce=["src"],Ne=e("div",{class:"v-notice-two-left g-flex-align-center"},[e("img",{src:Y,alt:""})],-1),Se={class:"v-notice-two-tips-val"},Pe=e("div",{class:"v-main-part-title"},[e("span",null,"\u4EA4\u6613\u5927\u5385")],-1),Le={class:"v-main-vip-list"},Ue=["src"],Ie={__name:"MainView",setup(I){z();const g=F(),s=V(),x=G(),i=k(()=>x.tm("mainView"));u();function u(){var n=g.query.tid;n&&window.localStorage.setItem("tid",n)}k(()=>{if(console.log("store.lang",s.lang),!s.langList.length)return{};var n=s.langList.find(o=>o.code==s.lang);return console.log("target",n),n||s.langList[0]}),M(()=>{console.log("\u5F53\u524D\u8DEF\u7531",g)});let d=p(null);y();async function y(){const{success:n,data:o}=await K({id:1});!n||s.system.Version!=o.info.Version&&d.value.onShow()}let a=U({list:[]});M(()=>{v()});async function v(){s.loadingShow=!0;const{success:n,data:o}=await W();if(!!n)if(a.list=o.list,a.list.length)_();else return}let m=p(null);function _(){m.value.onShow(a.list)}let f=U({list:[{img:"/img/banner/vip1.png"},{img:"/img/banner/vip2.png"},{img:"/img/banner/vip3.png"}]});p("?"+new Date().getTime()),p(""),s.token&&(L(),D()),k(()=>s.userInfo);async function L(){s.loadingShow=!0;const{success:n,data:o}=await A();!n||(s.setUserInfo(o.info),console.log(o))}let N=p(0);async function D(){s.loadingShow=!0;const{success:n,data:o}=await E();!n||(N.value=o.readNums)}return(n,o)=>{const R=b("van-swipe-item"),H=b("van-swipe"),O=b("van-notice-bar");return l(),r("div",$e,[ke,e("div",be,[w(H,{class:"v-main-swipe",autoplay:3e3,"indicator-color":"white"},{default:C(()=>[(l(!0),r(S,null,P(t(s).banner.lunbo,(h,$)=>(l(),X(R,{class:"v-main-swipe-item",key:$},{default:C(()=>[e("img",{src:h.img,alt:""},null,8,Ce)]),_:2},1024))),128))]),_:1}),t(a).list.length?(l(),r("div",{key:0,onClick:_,class:"v-notice-two g-flex-align-center"},[Ne,w(O,{scrollable:"",speed:80},{default:C(()=>[e("p",Se,[(l(!0),r(S,null,P(t(a).list,(h,$)=>(l(),r("span",{key:$},c(h.des),1))),128))])]),_:1}),e("div",{onClick:o[0]||(o[0]=J(h=>n.$router.push({name:"noticelist"}),["stop"])),class:"v-notice-two-right g-flex-align-center"},[e("span",null,c(t(i).moreText)+">",1)])])):Q("",!0),Pe,e("div",Le,[(l(!0),r(S,null,P(t(f).list,(h,$)=>(l(),r("div",{onClick:o[1]||(o[1]=Ve=>n.$router.push({name:"vipdetail",query:{id:1}})),class:"v-main-vip-item g-flex-align-center",key:$},[e("img",{src:h.img,alt:""},null,8,Ue)]))),128))])]),w(ue,{ref_key:"refNoticePop",ref:m},null,512),w(ye,{ref_key:"refUpdatePop",ref:d},null,512)])}}};export{Ie as default};
