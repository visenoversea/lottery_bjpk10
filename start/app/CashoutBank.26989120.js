import{s as H,u as L,c as b,f as M,g as P,C as $,ax as J,r as U,o as x,a as w,e as d,k as K,b as t,ag as V,t as l,d as e,p as C,F as Z,G as q,ac as A,ay as D,v as y,E as Q,B as X,m as Y,W as ee,S as O,at as te,au as se,av as ae,aw as ne}from"./main.33b32f9a.js";import{_ as oe}from"./BussinessPwdPop.fda1f97f.js";import{_ as le}from"./public_increase_black.6b589796.js";import{_ as ie}from"./deficiency_bank_record.09605f43.js";const ce=""+new URL("../img/icon/select.png",import.meta.url).href;const re={class:"c_select_address_pop g-flex-column"},ue=t("i",{class:"iconfont icon-zuojiantou"},null,-1),de=[ue],me={class:"v-bank-card-list-pwd-container"},fe={class:"v-title g-flex-justify-between g-flex-align-center"},he={class:"v-bank-card-list-tips"},_e={class:"v-bank-card-list-content"},ve=["onClick"],be={class:"v-bank-card-list-item-bank-name"},ke={class:"v-bank-card-list-item-bank-user"},pe={class:"v-bank-card-list-item-bank-cardnum"},ge={class:"v-bank-card-list-item-bank-select"},xe=t("img",{src:ce,alt:""},null,-1),we=[xe],Ce={class:"v-back-car-list-no g-flex-column g-flex-align-center"},ye=t("img",{src:ie,alt:""},null,-1),Se={class:"v-back-car-list-no-text"},Te={__name:"SelectCashoutBackCardPop",emits:["emitSelectBank"],setup(E,{expose:m,emit:N}){H();const n=L(),_=b(()=>n.tm("selectCashoutBankCardPop"));M();let f=P(!1),s=P(-1),a=$({list:[]});function k(){s.value=-1,f.value=!0}function S(){f.value=!1}m({onShow:k}),I();async function I(){const{success:h,data:i}=await J();!h||(a.list=i.list,s.value=i.list.findIndex(p=>p.is_default==1))}function j(h,i){s.value!=i&&(s.value=i,S(),N("emitSelectBank",h))}return(h,i)=>{const p=U("van-popup");return x(),w("div",re,[d(p,{overlay:!1,"close-on-click-overlay":!1,position:"right",style:{width:"100%",height:"100%"},show:e(f),"onUpdate:show":i[1]||(i[1]=u=>Q(f)?f.value=u:f=u),class:"c-select-address-pop-container g-flex-column"},{default:K(()=>[t("div",{class:"v-bank-card-list-pwd-head g-flex-align-center"},[t("div",{onClick:S,class:"v-bank-card-list-pwd-head-back-icon"},de)]),t("div",me,[t("div",fe,[V(l(e(_).titleText)+" ",1),t("img",{onClick:i[0]||(i[0]=u=>h.$router.push({name:"addbankcard"})),src:le,alt:""})]),t("div",he,l(e(_).tipsText),1),C(t("div",_e,[(x(!0),w(Z,null,q(e(a).list,(u,g)=>(x(),w("div",{onClick:F=>j(u,g),key:g,class:"v-bank-card-list-item",style:A({backgroundImage:"url('/img/icon/extract_bank_card.png')"})},[t("div",be,l(u.bank_name),1),t("div",ke,l(u.name),1),t("div",pe,l(e(D)(u.card_number)),1),C(t("div",ge,we,512),[[y,e(s)==g]])],12,ve))),128))],512),[[y,e(a).list.length]]),C(t("div",Ce,[ye,t("span",Se,l(e(_).nolistText),1)],512),[[y,!e(a).list.length]])])]),_:1},8,["show"])])}}};const Be={class:"v_cashout_bank_select g-flex-column"},$e={class:"v-head g-flex-justify-center g-flex-align-center"},Ve=t("i",{class:"iconfont icon-zuojiantou"},null,-1),Pe=[Ve],Ne={class:"v-title g-flex-align-center g-flex-justify-center"},Ie={class:"v-cashout-bank-select-container"},je={class:"v-cashout-bank-select-content"},Ue={class:"v-cashout-bank-select-from"},Fe={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-select"},ze={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},Ge={class:"v-cashout-bank-select-form-item-title"},Oe={class:"v-cashout-bank-select-form-item-right"},He={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},Le={class:"v-cashout-bank-select-form-item-title"},Me={class:"v-cashout-bank-select-form-item-right"},De={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},Ee={class:"v-cashout-bank-select-form-item-title"},Re={class:"v-cashout-bank-select-form-item-right"},We={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},Je={class:"v-cashout-bank-select-form-item-title"},Ke={class:"v-cashout-bank-select-form-item-right"},Ze={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},qe={class:"v-cashout-bank-select-form-item-title"},Ae={class:"v-cashout-bank-select-form-item-right"},Qe={class:"v-cashout-bank-select-form-item v-cashout-bank-select-form-item-second"},Xe={class:"v-cashout-bank-select-form-item-title"},Ye={class:"v-cashout-bank-select-form-item-right"},et={key:0,class:"v-cashout-coin-bottom-canuse g-flex-align-center"},tt={class:"v-cashout-coin-bottom-canuse g-flex-align-center"},st={class:"v-cashout-coin-bottom-canuse g-flex-align-center"},it={__name:"CashoutBank",setup(E){const m=H(),N=L(),n=b(()=>N.tm("cashoutBank")),_=M(),f=X();let s=$({id:f.params.id,amount:"",money:"",fundPassword:"",info:{bank_name:"",bank_code:"",card_number:"",name:"",branch:""}});$({chain:[]});let a=$({info:{}}),k=b(()=>m.userInfo);async function S(){const{success:c,data:o}=await ee();if(!!c&&(m.setUserInfo(o.info),!k.value.fundPasswordStatus)){O(n.value.setBusPwdText),setTimeout(()=>{_.replace({name:"changebuspwd"})},500);return}}S();async function I(){m.loadingShow=!0;const{success:c,data:o}=await te({id:s.id});if(!!c&&(console.log(o),Object.assign(a,o.info),a.info.isSelect==0)){let B=JSON.parse(localStorage.getItem("cashoutBankInfo"));if(B==null)return;Object.assign(s.info,B)}}I();function j(){m.system.WithdrawModel==1?a.info.fee==0?s.amount=T.value.balance:s.amount=se(T.value.balance,a.info.fee,a.info.fixed):s.amount=T.value.balance,z()}function h(c){console.log("emitSelectBank",c),s.info=c}const i=P(null);function p(){i.value.onShow()}const u=P(null);function g(){u.value.onShow()}function F(c){s.fundPassword=c,R()}async function R(){m.loadingShow=!0;const{success:c,data:o}=await ne(s);!c||(a.info.isSelect==0&&localStorage.setItem("cashoutBankInfo",JSON.stringify(s.info)),O(o.msg),_.go(-1))}function z(){if(!s.amount)return s.money="";s.money=ae(Number(s.amount)*Number(a.info.rate),a.info.fixed).toFixed(a.info.fixed)}const T=b(()=>k.value.id?{balance:k.value.balance,currency:"HK"}:{balance:"",currency:""}),W=b(()=>s.amount?((Number(s.amount)-Number(G.value))*Number(a.info.rate)).toFixed(a.info.fixed):"0.00"),G=b(()=>(console.log("cashoutInfo.info.fee",a.info.fee),a.info.fee?Number(a.info.fee)==0?"0.00":Number(a.info.fee)<1?(s.amount*a.info.fee).toFixed(a.info.fixed):Number(a.info.fee).toFixed(a.info.fixed):"0.00"));return(c,o)=>{const B=U("van-cell"),v=U("van-field");return x(),w("div",Be,[t("div",$e,[t("div",{onClick:o[0]||(o[0]=r=>c.$router.go(-1)),class:"v-head-back-icon g-flex-align-center"},Pe),t("span",Ne,l(e(n).titleText),1)]),t("div",Ie,[t("div",je,[t("div",Ue,[C(t("div",Fe,[d(B,{onClick:p,class:"v-cashout-bank-select-form-item-right-input",title:e(n).cardText,"is-link":"",value:e(s).info.bank_name?e(s).info.bank_name+" "+e(D)(e(s).info.card_number)+" "+e(s).info.name:e(n).selectText},null,8,["title","value"])],512),[[y,e(a).info.isSelect==1]]),C(t("div",null,[t("div",ze,[t("p",Ge,l(e(n).bankNameText),1),t("div",Oe,[d(v,{class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).info.bank_name,"onUpdate:modelValue":o[1]||(o[1]=r=>e(s).info.bank_name=r),label:"","label-width":0,placeholder:e(n).bankNamePlaceholderText},null,8,["modelValue","placeholder"])])]),t("div",He,[t("p",Le,l(e(n).cardNumText),1),t("div",Me,[d(v,{class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).info.card_number,"onUpdate:modelValue":o[2]||(o[2]=r=>e(s).info.card_number=r),label:"","label-width":0,placeholder:e(n).cardNumberPlaceholderText},null,8,["modelValue","placeholder"])])]),t("div",De,[t("p",Ee,l(e(n).nameText),1),t("div",Re,[d(v,{class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).info.name,"onUpdate:modelValue":o[3]||(o[3]=r=>e(s).info.name=r),label:"","label-width":0,placeholder:e(n).namePlaceholderText},null,8,["modelValue","placeholder"])])]),t("div",We,[t("p",Je,l(e(n).zhihangText),1),t("div",Ke,[d(v,{class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).info.branch,"onUpdate:modelValue":o[4]||(o[4]=r=>e(s).info.branch=r),label:"","label-width":0,placeholder:e(n).zhihangPlaceholderText},null,8,["modelValue","placeholder"])])]),t("div",Ze,[t("p",qe,l(e(n).zhihangCodeText),1),t("div",Ae,[d(v,{class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).info.bank_code,"onUpdate:modelValue":o[5]||(o[5]=r=>e(s).info.bank_code=r),label:"","label-width":0,placeholder:e(n).zhihangCodePlaceholderText},null,8,["modelValue","placeholder"])])])],512),[[y,e(a).info.isSelect==0]]),t("div",Qe,[t("p",Xe,l(e(n).tixianMoneyText)+":",1),t("div",Ye,[d(v,{onInput:z,class:"v-cashout-bank-select-form-item-right-input",modelValue:e(s).amount,"onUpdate:modelValue":o[6]||(o[6]=r=>e(s).amount=r),label:"","label-width":0,placeholder:e(n).tixianMoneyPlaceholderText},null,8,["modelValue","placeholder"]),t("span",{onClick:j},l(e(n).allText),1)])]),e(m).system.WithdrawModel==2?(x(),w("p",et,[V(l(e(n).shijidaozhangText)+": ",1),t("span",null,l(e(W)),1)])):Y("",!0),t("p",tt,[V(l(e(n).canUseText)+": ",1),t("span",null,l(e(T).balance),1)]),t("p",st,[V(l(e(n).shouxuFeiText)+": ",1),t("span",null,l(e(G)),1)])]),t("div",{onClick:g,class:"v-cashout-bank-select-submit-btn g-flex-align-center g-flex-justify-center"},[t("span",null,l(e(n).submitText),1)])])]),d(oe,{ref_key:"refBussinessPwdPop",ref:u,onEmitPwd:F},null,512),d(Te,{ref_key:"refSelectCashoutBackCardPop",ref:i,onEmitSelectBank:h},null,512)])}}};export{it as default};
