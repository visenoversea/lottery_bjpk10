import{s as w,g as u,u as U,c as g,w as S,K as I,X as P,r as V,o as k,a as B,b as e,t as s,d as t,e as T,Y as b,bl as M,bm as $,Q as j,W as E,I as N}from"./main.ed929957.js";const R={class:"v_transfer g-flex-column n-bg"},X={class:"new-head"},F=e("img",{src:N,alt:""},null,-1),H=[F],K=e("i",{class:"iconfont icon-datijilu"},null,-1),O=[K],Q={class:"new-head_title_text"},W={class:"v-transfer-title g-flex"},Y={class:"name"},q={class:"balance"},z={class:"v-transfer-content"},A={class:"v-transfer-content-item"},J={class:"item-left"},L={class:"consume-value"},Z={class:"item-select"},ee={class:"select-wrap"},te=["src"],se={class:"coins"},ae=e("span",null,null,-1),ne=e("div",{class:"v-line"},[e("div",{class:"line"})],-1),oe={class:"v-transfer-content-item v-transfer-content-item-bot"},le={class:"item-left"},ce={class:"consume-value"},ie={class:"item-select"},ue={class:"select-wrap"},de=["src"],re={class:"coins"},_e=e("span",null,null,-1),ve={class:"exchange-value"},me={class:"introduce-value"},he={class:"introduce-value"},fe={class:"introduce-value"},ge={__name:"Transfer",setup(pe){const D=w(),l=u(1),_=u(),v=u(),p=U(),c=g(()=>p.tm("myTransfer")),h=g(()=>p.tm("mytransfer"));let n=u({text:l.value===2?"USDT":"DCPTG",img:l.value===2?USDTIMG:DCPIMG,amount:""}),i=u({text:l.value===1?"USDT":"DCPTG",img:l.value===1?USDTIMG:DCPIMG,amount:""});const m=u(0);let f=null;u();const x=async()=>{const{data:o}=await M();m.value=o.data.USDT,f=setTimeout(x,5e3)},C=async()=>{if(!n.value.amount)return;D.loadingShow=!0;const{success:o,data:a}=await $({amount:n.value.amount,type:l.value});!o||(j(a.msg),n.value.amount="",_.value=a.balance_dcptg,v.value=a.balance)},y=()=>{n.value.amount=l.value===1?_.value:v.value},G=async()=>{var d;const{success:o,data:a}=await E();_.value=(d=a.info)==null?void 0:d.balance_dcptg,v.value=a.info.balance};return S(n,o=>{l.value===1?i.value.amount=(o.amount*m.value).toFixed(2)+"":i.value.amount=(o.amount/m.value).toFixed(2)+""},{deep:!0}),I(()=>{x(),G()}),P(()=>{f&&clearTimeout(f)}),(o,a)=>{const d=V("van-field");return k(),B("div",R,[e("div",X,[e("div",{onClick:a[0]||(a[0]=r=>o.$router.go(-1)),class:"new-head-back"},H),e("div",{onClick:a[1]||(a[1]=r=>o.$router.push({name:"transferrecord"})),class:"v-head-right g-flex-align-center"},O)]),e("div",Q,s(t(h).titletext),1),e("div",W,[e("span",Y,"Swap "+s(t(n).text),1),e("span",q,s(t(h).consumebalance)+": "+s(l.value===1?_.value:v.value),1)]),e("div",z,[e("div",A,[e("div",J,[e("p",null,s(t(c).consumeText)+" ("+s(t(n).text)+")",1),e("div",L,[T(d,{modelValue:t(n).amount,"onUpdate:modelValue":a[2]||(a[2]=r=>t(n).amount=r),label:"",placeholder:"0.00"},null,8,["modelValue"])])]),e("div",Z,[e("div",ee,[e("img",{src:t(n).img,alt:""},null,8,te),e("div",se,[b(s(t(n).text),1),ae]),e("div",{class:"max",onClick:y},s(t(h).consumeamountmax),1)])])]),ne,e("div",oe,[e("div",le,[e("p",null,s(t(c).receiveText)+" ("+s(t(i).text)+")",1),e("div",ce,[T(d,{modelValue:t(i).amount,"onUpdate:modelValue":a[3]||(a[3]=r=>t(i).amount=r),label:"",readonly:"",placeholder:"0.00"},null,8,["modelValue"])])]),e("div",ie,[e("div",ue,[e("img",{src:t(i).img,alt:""},null,8,de),e("div",re,[b(s(t(i).text),1),_e])])])])]),e("div",ve,s(t(c).EsimatedText)+":1 DCPTG\u2248"+s(m.value)+" USDT",1),e("div",me,s(t(c).introduceText),1),e("div",he,s(t(c).introduce1Text),1),e("div",fe,s(t(c).introduce2Text),1),e("div",{class:"exchange-btn g-flex-align-center g-flex-justify-center",onClick:C},s(t(c).exchangeText),1)])}}};export{ge as default};
